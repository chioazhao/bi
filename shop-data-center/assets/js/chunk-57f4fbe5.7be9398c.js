(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57f4fbe5"],{"38f5":function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"self-pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handlePageChange,"size-change":t.handleSizeChange}})],1)},i=[],o=(a("a9e3"),a("5627")),r={name:"Pagination",mixins:[o["a"]],props:{total:Number},data:function(){return{pageSizes:[10,20,50,100,300],pageSize:20,page:1}},methods:{handleSizeChange:function(t){this.pageSize=t,this.$emit("on-page-change",{page:this.page,pageSize:this.pageSize})},handlePageChange:function(t){this.page=t,this.$emit("on-page-change",{page:t,pageSize:this.pageSize})},getPaginationData:function(){return{page:this.page,pageSize:this.pageSize}}}},s=r,c=(a("6658"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"7d1a7f65",null);e["a"]=u.exports},"47c5":function(t,e,a){"use strict";a.d(e,"k",(function(){return r})),a.d(e,"n",(function(){return s})),a.d(e,"l",(function(){return c})),a.d(e,"j",(function(){return u})),a.d(e,"i",(function(){return l})),a.d(e,"o",(function(){return p})),a.d(e,"a",(function(){return d})),a.d(e,"c",(function(){return f})),a.d(e,"g",(function(){return h})),a.d(e,"e",(function(){return m})),a.d(e,"m",(function(){return b})),a.d(e,"p",(function(){return g})),a.d(e,"q",(function(){return v})),a.d(e,"b",(function(){return _})),a.d(e,"d",(function(){return y})),a.d(e,"h",(function(){return D})),a.d(e,"f",(function(){return x}));var n=a("5530"),i=(a("4e82"),a("99af"),a("c1fb")),o=a("da71"),r=function(){var t={};return i["a"].get(o["a"].api("Dashboard/LiveFinance/getBusOptions"),{params:t})},s=function(t){var e=t.busId,a=t.timeFrame,n=t.startDate,r=t.endDate,s=t.sort,c=t.page,u=t.pageSize,l={busId:e,timeFrame:a,sort:s,startDate:n,endDate:r,page:c,pageSize:u};return i["a"].post(o["a"].api("Dashboard/LiveFinance/getBusFinanceReportList"),l)},c=function(t){var e={id:t};return i["a"].post(o["a"].api("Dashboard/LiveFinance/getBusFinanceDetailByid"),e)},u=function(t){var e=o["a"].api("Dashboard/LiveFinance/exportBusFinance")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},l=function(t){var e=o["a"].api("Dashboard/LiveFinance/exportBusFinanceDetail")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},p=function(t){var e=t.title,a=t.author,n=t.status,r=t.busId,s=t.timeFrame,c=t.startDate,u=t.endDate,l=t.sort,p=t.page,d=t.pageSize,f={title:e,author:a,status:n,busId:r,timeFrame:s,sort:l,startDate:c,endDate:u,page:p,pageSize:d};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/getLiveBroadcastList"),f)},d=function(t){var e=t.title,a=t.author,n={title:e,author:a};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/addLiveBroadcast"),n)},f=function(t){var e=t.data,a={data:e};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/addMoreLiveBroadcast"),a)},h=function(t){var e=t.id,a=t.title,n=t.author,r={id:e,title:a,author:n};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/editBroadcast"),r)},m=function(t){var e=t.ids,a={ids:e};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/deleteBroadcast"),a)},b=function(t){var e=t.liveId,a=t.goodsNo,n={live_id:e,goods_no:a};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/getLiveHandCardList"),n)},g=function(t){var e=t.goodsNo,a={goods_no:e};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/getProductInfo"),a)},v=function(t){var e=t.id,a=t.liveId,r=t.goodsNo,s=t.pic,c=t.extend,u={live_id:a,goods_no:r,pic:s,extend:c};return e?i["a"].post(o["a"].api("Dashboard/LiveHandCard/editCard"),Object(n["a"])({id:e},u)):i["a"].post(o["a"].api("Dashboard/LiveHandCard/addCard"),u)},_=function(t){var e=t.liveId,a=t.data,n={live_id:e,data:a};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/addMoreCard"),n)},y=function(t){var e=t.ids,a={ids:e};return i["a"].post(o["a"].api("Dashboard/LiveHandCard/deleteCard"),a)},D=function(t){var e=o["a"].api("Dashboard/LiveHandCard/exportCard")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},x=function(t){var e=o["a"].api("Dashboard/LiveHandCard/downloadImage")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)}},5627:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={data:function(){return{tableLoading:!1,dataTotal:0,pageSize:50,currentPage:1,pageSizes:[20,50,100,200,400]}}}},"5f39":function(t,e,a){},6658:function(t,e,a){"use strict";a("ff04")},6705:function(t,e,a){"use strict";a("8e5a")},"8e5a":function(t,e,a){},aa97:function(t,e,a){"use strict";a("5f39")},b80a:function(t,e,a){"use strict";a("fda2")},cd05:function(t,e,a){"use strict";a.d(e,"l",(function(){return o})),a.d(e,"f",(function(){return r})),a.d(e,"i",(function(){return s})),a.d(e,"g",(function(){return c})),a.d(e,"m",(function(){return u})),a.d(e,"k",(function(){return l})),a.d(e,"j",(function(){return p})),a.d(e,"c",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"d",(function(){return h})),a.d(e,"a",(function(){return m})),a.d(e,"h",(function(){return b})),a.d(e,"e",(function(){return g}));a("4e82"),a("99af");var n=a("c1fb"),i=a("da71"),o=function(){return n["a"].get(i["a"].api("Dashboard/ShopFinance/getShopOptions"),{})},r=function(){return n["a"].get(i["a"].api("Dashboard/ShopFinance/getMaintainerOptions"),{})},s=function(t){var e=t.shopId,a=t.timeFrame,o=t.dateTime,r={shopId:e,timeFrame:a,dateTime:o};return n["a"].get(i["a"].api("Dashboard/ShopFinance/getShopFinanceDetail"),{params:r})},c=function(){return n["a"].get(i["a"].api("Dashboard/ShopFinance/getPaperWorkList"))},u=function(t){var e=t.shopId,a=t.limit,o=t.timeFrame,r={shopId:e,limit:a,timeFrame:o};return n["a"].get(i["a"].api("Dashboard/ShopFinance/getShopProfitList"),{params:r})},l=function(t){var e=t.shopId,a=t.timeFrame,o=t.sort,r=t.startDate,s=t.endDate,c=t.isSplit,u=t.maintainers,l=t.page,p=t.pageSize,d={shopId:e,timeFrame:a,sort:o,startDate:r,endDate:s,isSplit:c,maintainers:u,page:l,pageSize:p};return n["a"].get(i["a"].api("Dashboard/ShopFinance/getShopFinanceReportList"),{params:d})},p=function(t){var e=t.id,a=t.timeFrame,o={id:e,timeFrame:a};return n["a"].get(i["a"].api("Dashboard/ShopFinance/getShopFinanceDetailByid"),{params:o})},d=function(t){var e=i["a"].api("Dashboard/ShopFinance/exportShopFinance")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},f=function(t){var e=i["a"].api("Dashboard/ShopFinance/exportShopFinanceDetail")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},h=function(t){var e=t.type,a=t.id,o=t.timeFrame,r=t.startDate,s=t.endDate,c=t.sort,u={type:e,id:a,timeFrame:o,startDate:r,endDate:s,sort:c};return n["a"].get(i["a"].api("Dashboard/ShopFinance/getDivFinanceReportList"),{params:u})},m=function(t){var e=i["a"].api("Dashboard/ShopFinance/exportDivFinance")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},b=function(t){var e=t.shopId,a=t.timeFrame,o=t.dateTime,r=t.saleAmount,s=t.postSum,c={shopId:e,timeFrame:a,dateTime:o,saleAmount:r,postSum:s};return n["a"].get(i["a"].api("Dashboard/ShopFinance/getPostFee"),{params:c})},g=function(){var t={};return n["a"].get(i["a"].api("Dashboard/ShopFinance/getDivisionData"),{params:t})}},d865:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"live-sale-report"},[e("div",{staticClass:"search-container"},[e("SearchForm",{ref:"searchForm",on:{"on-search":t.handleQuery,"on-export":t.handleExportList}})],1),e("div",{staticClass:"table-container"},[e("Table",{attrs:{loading:t.loading,columns:t.listCols,data:t.tableData,setColumn:!0,option:t.tableOption},on:{"row-dblclick":t.handleClickLiveDetail,"sort-change":t.handleSortChange},scopedSlots:t._u([{key:"action",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleClickLiveDetail(a.row)}}},[t._v(" 详情 ")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleExportDetail(a.row.id)}}},[t._v(" 导出 ")])]}}])})],1),e("Pagination",{ref:"pagination",attrs:{total:t.total},on:{"on-page-change":t.handleQuery,"on-page-size-change":t.handleQuery}}),e("LiveDetailWin",{ref:"liveDetailWin",attrs:{baseCol:t.baseCol,detailCols:t.detailCols}})],1)},i=[],o=a("53ca"),r=a("3835"),s=a("5530"),c=(a("d81d"),a("4e82"),a("a15b"),a("4de4"),a("d3b7"),a("159b"),a("13d5"),a("b680"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-form",attrs:{id:"live-search-form"}},[e("el-form",{ref:"form",attrs:{model:t.form,size:"small",inline:""}},[e("el-form-item",{attrs:{label:"商务："}},[e("el-select",{staticStyle:{width:"300px"},attrs:{clearable:"",multiple:"",filterable:"","collapse-tags":"",placeholder:"请选择部门、商务，可搜索，可多选"},model:{value:t.form.busIdArr,callback:function(e){t.$set(t.form,"busIdArr",e)},expression:"form.busIdArr"}},t._l(t.busOptions,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(a.label))]),e("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e("el-tag",{attrs:{effect:"plain",type:1==a.type?"primary":"success"}},[t._v(t._s(1==a.type?"商务":"部门"))])],1)])})),1),e("el-button-group",[e("el-button",{attrs:{type:"warning"},on:{click:t.onClearBusSelect}},[t._v("清空")]),e("el-button",{attrs:{type:"primary"},on:{click:t.onSelectAllBus}},[t._v("全选")])],1)],1),e("el-form-item",{attrs:{label:"时间："}},[e("el-radio-group",{model:{value:t.form.timeFrame,callback:function(e){t.$set(t.form,"timeFrame",e)},expression:"form.timeFrame"}},[e("el-radio-button",{attrs:{label:"day"}},[t._v("日")]),e("el-radio-button",{attrs:{label:"month"}},[t._v("月")])],1),e("el-date-picker",{attrs:{type:"day"==t.form.timeFrame?"daterange":"monthrange","range-separator":"-","value-format":(t.form.timeFrame,"yyyy-MM-dd"),format:"day"==t.form.timeFrame?"yyyy年MM月dd日":"yyyy年MM月","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),e("el-button",{attrs:{type:"warning"},on:{click:t.onClearDateSelect}},[t._v("清空")])],1),e("el-form-item",[e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.onExport}},[t._v("导出")])],1)],1)],1)],1)}),u=[],l=(a("fb6a"),a("b0c0"),a("2f62")),p=a("cd05"),d=a("47c5"),f=a("fa7d"),h=a("ed08"),m=a("d0f1"),b={name:"SearchForm",mounted:function(){this.init()},data:function(){return{form:{busIdArr:[],timeFrame:"day",date:[],isSplit:!0},pickerOptions:{shortcuts:m["a"]}}},watch:{"form.timeFrame":{handler:function(){var t=Object(r["a"])(this.form.date,2),e=t[0],a=t[1];if("day"===this.form.timeFrame){var n=Object(h["a"])(new Date(e),"yyyy-MM-dd"),i=Object(h["a"])(new Date(a),"yyyy-MM-dd");this.form.date=[n.slice(0,10),i.slice(0,10)]}}}},computed:Object(s["a"])({},Object(l["c"])({busOptions:"finance/busOptions",noticeList:"finance/noticeList"})),methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])({setBusOptions:"finance/setBusOptions",setNoticeList:"finance/setNoticeList"})),{},{init:function(){Object(f["e"])(this.busOptions)?this.getBusOptions():this.onSearchToday(),Object(f["e"])(this.noticeList)&&this.getNoticeList()},getFormData:function(){return Object(s["a"])({},this._getFormData())},onSelectAllBus:function(){var t=this.busOptions.map((function(t){return t.value}));this.form.busIdArr=t},onClearBusSelect:function(){this.form.busIdArr=[]},onClearDateSelect:function(){this.form.date=[]},onSearch:function(){this.$emit("on-search",this._getFormData())},onSearchToday:function(){this.form.timeFrame="day";var t=Object(h["a"])(new Date,"yyyy-MM-dd");this.form.date=[t,t],this.onSearch()},onExport:function(){this.$emit("on-export",this._getFormData())},_getFormData:function(){var t=Object.assign({},Object(s["a"])({},this.form));if(t["date"]=t["date"]||["",""],"month"===t.timeFrame&&t.date.length>0){var e=this.form.date[0].slice(0,7),a=this.form.date[1].slice(0,7);t.date=[e,a]}return t},getBusOptions:function(){var t=this;Object(d["k"])().then((function(e){if(200===e.code){var a=e.data.map((function(t){return{value:t.id,label:t.name,type:t.type}}));t.setBusOptions(a),t.onSearchToday()}else t.$message.error(e.msg||"初始化店铺信息失败，请重试刷新页面")}))},getNoticeList:function(){var t=this;Object(p["g"])().then((function(e){200==e.code&&(Object(f["e"])(e.data)||t.setNoticeList(e.data))}))}})},g=b,v=(a("aa97"),a("2877")),_=Object(v["a"])(g,c,u,!1,null,"224a6a6a",null),y=_.exports,D=function(){var t=this,e=t._self._c;return e("Win",{ref:"win",attrs:{title:t.title,top:"10vh"}},[e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"button-container"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"small"},on:{click:t.onExport}},[t._v("导出")])],1),e("div",{staticClass:"table-container"},[e("Table",{attrs:{loading:t.loading,columns:t.detailCols,data:t.tableData,setColumn:!1,option:t.tableOption},on:{"sort-change":t.onSortChange}})],1)])])},x=[],F=a("f2bc"),S=a("ac0d"),C=a("dc19"),O={name:"BusFinanceDetailWin",mixins:[S["a"],S["c"]],components:{Win:F["a"],Table:C["a"]},props:{baseCol:Object,detailCols:Array},computed:{title:function(){return"「 "+this.busName+" 」"+this.baseTitle},transToValue:function(t,e){return t[e]}},beforeMount:function(){this.tableHeight=.75*window.innerHeight*.75,this.tableOption.height=.75*window.innerHeight*.75},data:function(){return{baseTitle:"达人详情",busName:"",busId:-1,tableData:[],tableHeight:500,tableOption:{ref:"liveReportDetail",key:"liveReportDetail",showSummary:!1}}},methods:{onSortChange:function(t){var e=t.column,a=t.prop,n=t.order;Object(f["i"])({column:e,prop:a,order:n},this.tableData)},open:function(){return this.clear(),this.$refs.win.open(),this},close:function(){this.$refs.win.close()},clear:function(){return this.tableData=[],this},init:function(t){var e=this;this.id=t.id,this.busName=t.bus_name,this.openLoading(),Object(d["l"])(t.id).then((function(t){e.tableData=t.data||[],e.closeLoading()})).catch((function(){e.$message.error("获取数据失败!"),e.closeLoading()}))},onExport:function(){Object(d["i"])({id:this.id})}}},L=O,P=(a("6705"),Object(v["a"])(L,D,x,!1,null,"27047d4c",null)),j=P.exports,w=a("38f5"),W={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:80,align:"right",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",process:function(t){return isNaN(t)?t:parseFloat((+t).toFixed(1))},subProcess:function(t){return t},disabled:!1},k=[{fixed:!0,prop:"dep_title",title:"部门",align:"left",minWidth:120,disabled:!0},{fixed:!0,prop:"bus_name",title:"商务",align:"left",minWidth:100,disabled:!0},{fixed:!0,prop:"date",title:"统计时间",align:"center",minWidth:140,disabled:!0},{prop:"profit",subProp:"profit_pro",title:"利润",subtitle:"利润率",tooltip:"销售额 - 成本 - 各种支出",subTooltip:"利润 / 销售额",minWidth:150,process:function(t){return t},subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"sale_amount",title:"销售额",tooltip:"根据配货时间，统计（待反馈，反馈成功，待退货，待退款，反馈失败）订单金额",sortable:"custom",minWidth:90,disabled:!0,class:"text-cyan"},{prop:"rebate_amount",title:"返利",tooltip:"财务按天导入商务返利",class:"text-cyan"},{prop:"cost_amount",title:"货品成本",sortable:"custom",tooltip:"VIP折扣价",minWidth:110,class:"text-cyan"},{prop:"gross_profit",subProp:"gross_profit_pro",title:"毛利",subtitle:"毛利率",tooltip:"销售额 - 货品成本",subTooltip:"毛利额 / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"all_expenses",subProp:"all_expenses_pro",title:"费用合计",subtitle:"占比",tooltip:"各项费用之和",subTooltip:"费用总计 / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"plat_commissions",subProp:"plat_commissions_pro",title:"平台佣金",subtitle:"占比",tooltip:"平台扣点佣金",subTooltip:"(平台扣费 - 佣金) / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"plat_other_expenses",subProp:"plat_other_expenses_pro",title:"平台其他",subtitle:"占比",tooltip:"运费险、返点积分、花呗信用卡手续费",subTooltip:"(平台扣费 - 其他费用) / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"marketing_expenses",subProp:"marketing_expenses_pro",title:"线下打款-营销费用",subtitle:"占比",tooltip:"线下打款的快车、直通车等用于引流的流量购买",subTooltip:"(线下打款-营销费用) / 销售额",minWidth:200,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"post_expenses",subProp:"post_expenses_pro",title:"配发费",subtitle:"占比",tooltip:"天马运动平台资费标准",subTooltip:"配发费 / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"return_expenses",subProp:"return_expenses_pro",title:"退货费用",subtitle:"占比",tooltip:"超过退货标准的，16元/件，不含配",subTooltip:"退货费用 / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"other_expenses",subProp:"other_expenses_pro",title:"其他费用",subtitle:"占比",tooltip:"售后补偿、设计费、办公费等支出",subTooltip:"其他费用 / 销售额",minWidth:140,subProcess:function(t){return t+"%"}},{prop:"labor_cost_expenses",subProp:"labor_cost_expenses_pro",title:"人工成本",subtitle:"占比",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"author_commission",subProp:"author_commission_pro",title:"达人佣金",subtitle:"占比",minWidth:140,tooltip:"达人佣金",subTooltip:"达人佣金 / 销售额",subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"manage_expenses",subProp:"manage_expenses_pro",title:"管理费用",subtitle:"占比",tooltip:"现货仓4个点，外仓6个点",subTooltip:"管理费用 / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"interest_expenses",subProp:"interest_expenses_pro",title:"资金成本",subtitle:"占比",tooltip:"月利 1%, 计费依据是充值到平台账号的信贷金额",subTooltip:"资金成本 / 销售额",minWidth:140,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"plat_marketing_expenses",subProp:"plat_marketing_expenses_pro",title:"平台营销费用",subtitle:"占比",tooltip:"平台营销费用",subTooltip:"平台营销费用 / 销售额",minWidth:150,subProcess:function(t){return t+"%"},class:"text-cyan",subClass:"text-orange"},{prop:"action",title:"操作",fixed:"right",slotName:"action",checked:!0,disabled:!0,align:"center",minWidth:100}],z=[{toString:!0,prop:"author_id",title:"达人ID",align:"left",minWidth:160,process:function(t){return t}},{prop:"author_name",title:"达人昵称",align:"left",minWidth:160,process:function(t){return t}},{prop:"order_date",title:"统计时间",align:"center",minWidth:100},{prop:"author_commission",title:"达人佣金",minWidth:90},{prop:"sale_amount",title:"销售额",minWidth:100,sortable:!0,process:function(t){return+t}},{prop:"profit",title:"利润",tooltip:"订单利润之和",minWidth:80,sortable:!0},{prop:"cost",title:"货品成本",tooltip:"VIP折扣价",minWidth:110,sortable:!0},{prop:"plat_commission",title:"平台佣金",tooltip:"除去平台佣金、配发费",minWidth:100},{prop:"freight_insurance",title:"运费险",minWidth:90},{prop:"post_fee",subProp:"post_fee_pro",title:"配发费",subtitle:"占比",tooltip:"天马运动平台资费标准",subTooltip:"配发费 / 销售额",minWidth:150,subProcess:function(t){return t+"%"}},{prop:"investment_service_fee",title:"招商服务费",minWidth:110}],T={name:"LiveSaleReport",mixins:[S["d"],S["c"],S["a"]],components:{SearchForm:y,LiveDetailWin:j,Table:C["a"],Pagination:w["a"]},created:function(){this.baseCol=W,this.listCols=k.map((function(t){return Object(s["a"])(Object(s["a"])({},W),t)})),this.detailCols=z.map((function(t){return Object(s["a"])(Object(s["a"])({},W),t)}))},data:function(){var t=this;return{tableData:[],original_data:[],tableOption:{ref:"liveReportList",key:"liveReportList",showSummary:!0,summaryMethod:function(e,a){return t.getSummaries(e,a)},tips:"双击行展开详情, 可拖动表头以改变排列顺序"},total:0}},methods:{handleClickLiveDetail:function(t){this.$refs.liveDetailWin.open().init(t)},handleQuery:function(t){var e=this,a=t.sort,n=this.$refs.searchForm.getFormData(),i=this.$refs.pagination.getPaginationData(),o=Object(r["a"])(n.date,2),s=o[0],c=o[1];this.openLoading(),Object(d["n"])({busId:n.busIdArr.join(","),timeFrame:n.timeFrame,sort:a,startDate:s,endDate:c,page:i.page,pageSize:i.pageSize}).then((function(t){e.closeLoading(),e.tableData=t.data||[],e.total=t.total,e.original_data=t.original_data||[],e.$notify({type:"success",title:"数据已更新"+Object(h["a"])(new Date,"HH: mm: ss"),offset:0})})).catch((function(){e.$message.error("获取数据失败!")}))},handleExportList:function(t){var e=Object(r["a"])(t.date,2),a=e[0],n=e[1];Object(d["j"])({busId:t.busIdArr.join(","),timeFrame:t.timeFrame,sort:"",startDate:a,endDate:n,isSplit:"true"})},handleExportDetail:function(t){Object(d["i"])({id:t})},handleSortChange:function(t){var e,a=t.prop,n=t.order;if(Object(f["e"])(n))e="";else{var i="descending"===n?"desc":"asc";e=a+"|"+i}this.handleQuery({sort:e})},getSummaries:function(t,e){var a=t.columns,n=this.original_data,i=[],r={},s=function(t){var a=e.filter((function(e){return e.prop===t}));return 0!==a.length&&a[0]},c={};return a.forEach((function(t){var e=n.map((function(e){return e[t.property]}));null!==e&&void 0!==e&&e.every((function(t){return!isNaN(t)}))?c[t.property]=null===e||void 0===e?void 0:e.reduce((function(t,e){return isNaN(+e)?t:t+e}),0):c[t.property]=e})),a.forEach((function(t,e){if(0===e)return i[e]="合计",void(r["合计"]=0);r[t.property]=e;var a=c[t.property];if("object"===Object(o["a"])(a))i[e]="bus_name"==t.property?a.length+"个":"/";else if(!isNaN(a)){var n=s(t.property);if(!n)return i[e]="/";if(n.subProp){var u=c[t.property],l=0===c["sale_amount"]?0:c[t.property]/c["sale_amount"];i[e]=parseFloat(+u.toFixed(1))+" | "+parseFloat((100*+l).toFixed(2))+"%"}else i[e]=parseFloat((+a).toFixed(2))}})),i}}},I=T,B=(a("b80a"),Object(v["a"])(I,n,i,!1,null,"2f75d406",null));e["default"]=B.exports},fda2:function(t,e,a){},ff04:function(t,e,a){}}]);