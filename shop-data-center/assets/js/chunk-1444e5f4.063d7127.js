(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1444e5f4"],{"179f":function(t,e,a){"use strict";a("74a2")},"1c0d":function(t,e,a){},"1da3":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"g",(function(){return s})),a.d(e,"j",(function(){return l})),a.d(e,"k",(function(){return c})),a.d(e,"d",(function(){return p})),a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"h",(function(){return f})),a.d(e,"i",(function(){return h}));a("b0c0"),a("4e82"),a("99af");var n=a("c1fb"),o=a("da71"),r=function(){return n["a"].get(o["a"].api("Dashboard/GoodsnoSalesStatistics/getShop"))},i=function(t){var e=t.goods_no,a={goods_no:e};return n["a"].get(o["a"].api("Dashboard/GoodsnoSalesStatistics/getAllShop"),{params:a})},s=function(){return n["a"].get(o["a"].api("Dashboard/GoodsnoSalesStatistics/getAllLabel"))},l=function(t){var e=t.goods_no,a=t.name,r={goods_no:e,name:a};return n["a"].post(o["a"].api("Dashboard/GoodsnoSalesStatistics/setGoodsnoLabel"),r)},c=function(t){var e=t.goods_no,a=t.shop,r=t.status,i={goods_no:e,shop:a,status:r};return n["a"].post(o["a"].api("Dashboard/GoodsnoSalesStatistics/addShopGoodsnoConf"),i)},p=function(t){var e=t.start_time,a=t.end_time,r=t.shop_id,i=t.brand,s=t.tag,l=t.goods_no,c=t.top_cname,p=t.cname,u=t.task_id,d=t.start,m=t.limit,f=t.sort,h={start_time:e,end_time:a,shop_id:r,brand:i,tag:s,goods_no:l,top_cname:c,cname:p,task_id:u,start:d,limit:m,sort:f};return n["a"].get(o["a"].api("Dashboard/GoodsnoSalesStatistics/getList"),{params:h})},u=function(t){var e=t.goods_no,a={goods_no:e};return n["a"].get(o["a"].api("Dashboard/GoodsnoSalesStatistics/getDetail"),{params:a})},d=function(t){var e=o["a"].api("Dashboard/GoodsnoSalesStatistics/export")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},m=function(t){var e=t.goods_no,a=t.shop_id,r=t.start_time,i=t.end_time,s={goods_no:e,shop_id:a,start_time:r,end_time:i};return n["a"].get(o["a"].api("Dashboard/GoodsnoSalesStatistics/getShopGoodsNoData"),{params:s})},f=function(t){var e=t.name,a=t.limit,r=t.start,i={name:e,limit:a,start:r};return n["a"].get(o["a"].api("Dashboard/PlanGoodsNoTask/getList"),{params:i})},h=function(t){var e=t.task_id,a=t.type,r=t.page,i=t.page_size,s={task_id:e,type:a,page:r,page_size:i};return n["a"].get(o["a"].api("Dashboard/PlanGoodsNoTask/getStatic"),{params:s})}},2706:function(t,e,a){},"2bfb":function(t,e,a){},"2d23":function(t,e,a){"use strict";a("2706")},"2fbd":function(t,e,a){"use strict";a("c37c")},"31f9":function(t,e,a){"use strict";a("978d")},3708:function(t,e,a){},"38f5":function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"self-pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handlePageChange,"size-change":t.handleSizeChange}})],1)},o=[],r=(a("a9e3"),a("5627")),i={name:"Pagination",mixins:[r["a"]],props:{total:Number},data:function(){return{pageSizes:[10,20,50,100,300],pageSize:20,page:1}},methods:{handleSizeChange:function(t){this.pageSize=t,this.$emit("on-page-change",{page:this.page,pageSize:this.pageSize})},handlePageChange:function(t){this.page=t,this.$emit("on-page-change",{page:t,pageSize:this.pageSize})},getPaginationData:function(){return{page:this.page,pageSize:this.pageSize}}}},s=i,l=(a("6658"),a("2877")),c=Object(l["a"])(s,n,o,!1,null,"7d1a7f65",null);e["a"]=c.exports},"4d6c":function(t,e,a){"use strict";a("3708")},5619:function(t,e,a){"use strict";a("2bfb")},5627:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={data:function(){return{tableLoading:!1,dataTotal:0,pageSize:50,currentPage:1,pageSizes:[20,50,100,200,400]}}}},5817:function(t,e,a){},6226:function(t,e,a){"use strict";a("6da7")},6484:function(t,e,a){"use strict";a.r(e);a("b680");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"anylysis-center"},[e("div",{staticClass:"search-container"},[e("SearchForm",{ref:"searchForm",on:{"on-search":t.handleQuery,"on-export":t.handleExportList}})],1),e("div",{staticClass:"table-container"},[e("Table",{ref:"treeTable",attrs:{loading:t.loading,columns:t.listCols,data:t.tableData,setColumn:!0,option:t.tableOption,"row-key":"id",load:t.load,lazy:!0,"tree-props":{hasChildren:"hasChildren"}},on:{"sort-change":t.handleSortChange,"change-tree":t.expandAll,"cell-click":t.handleCellClick},scopedSlots:t._u([{key:"title",fn:function(a){return[a.row.title||a.row.id>1e4?e("span",[t._v(t._s(a.row.title))]):e("span",{staticClass:"cursor",on:{click:function(e){return t.openShopList(a.row)}}},[e("el-icon",{staticClass:"el-icon-view"}),t._v(" "+t._s(a.row.shop_name)+" ")],1)]}},{key:"leader",fn:function(e){return[t._v(" "+t._s(e.row.leader||e.row.shopowner)+" ")]}},{key:"sale_amount",fn:function(a){return[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openMulSaleList(a.row)}}},[e("el-row",[e("el-col",{attrs:{span:7}},[t._v(t._s(t.processNum(a.row.sale_amount)))]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{attrs:{span:7}},[t._v(t._s(t.processNum(a.row.sale_amount_old)))]),e("el-col",{class:[+a.row.sale_amount_scale>=0?"up":"down"],attrs:{span:8}},[e("el-col",{staticClass:"trend",attrs:{span:9}},[e("i",{class:t.getIcon(a.row.sale_amount_scale)})]),e("el-col",{attrs:{span:15}},[t._v(" "+t._s(t.processNum(100*Math.abs(a.row.sale_amount_scale)))+"% ")])],1)],1)],1)]}},{key:"profit",fn:function(a){return[e("el-row",[e("el-col",{class:a.row.profit>0?"":"text-cyan",attrs:{span:8}},[t._v(t._s(t.processNum(a.row.profit)))]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{attrs:{span:6}},[t._v(t._s(t.processNum(100*a.row.profit_ratio))+"%")]),e("el-col",{class:[+a.row.profit_scale>=0?"up":"down"],attrs:{span:8}},[e("el-col",{staticClass:"trend",attrs:{span:9}},[e("i",{class:t.getIcon(a.row.profit_scale)})]),e("el-col",{attrs:{span:15}},[t._v(" "+t._s(t.processNum(100*Math.abs(a.row.profit_scale)))+"% ")])],1)],1)]}},{key:"gross_profit",fn:function(a){return[e("el-row",[e("el-col",{attrs:{span:8}},[t._v(t._s(t.processNum(a.row.gross_profit)))]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{attrs:{span:6}},[t._v(t._s(t.processNum(100*a.row.gross_profit_ratio))+"%")]),e("el-col",{class:[+a.row.gross_profit_scale>=0?"up":"down"],attrs:{span:8}},[e("el-col",{staticClass:"trend",attrs:{span:9}},[e("i",{class:t.getIcon(a.row.gross_profit_scale)})]),e("el-col",{attrs:{span:15}},[t._v(" "+t._s(t.processNum(100*Math.abs(a.row.gross_profit_scale)))+"% ")])],1)],1)]}},{key:"all_expenses",fn:function(a){return[e("el-link",{attrs:{type:a.row.shops?"info":"primary",underline:!a.row.shops},on:{click:function(e){return t.openExpenseRate(a.row)}}},[e("el-row",[e("el-col",{attrs:{span:8}},[t._v(t._s(t.processNum(a.row.all_expenses)))]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{attrs:{span:6}},[t._v(t._s(t.processNum(100*a.row.all_expenses_ratio))+"%")]),e("el-col",{class:[+a.row.all_expenses_scale>=0?"up":"down"],attrs:{span:8}},[e("el-col",{staticClass:"trend",attrs:{span:9}},[e("i",{class:t.getIcon(a.row.all_expenses_scale)})]),e("el-col",{attrs:{span:15}},[t._v(" "+t._s(t.processNum(100*Math.abs(a.row.all_expenses_scale)))+"% ")])],1)],1)],1)]}},{key:"visitors_num",fn:function(a){return[1==a.row.is_visitor||a.row.shops?e("el-link",{attrs:{type:a.row.shops?"info":"primary",underline:!a.row.shops},on:{click:function(e){return t.openVisitorForm(a.row)}}},[e("el-row",[e("el-col",{attrs:{span:8}},[t._v(t._s(a.row.visitors_num||"-"))]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{attrs:{span:7}},[t._v(t._s(a.row.visitors_num_old||"-"))]),e("el-col",{class:[+a.row.visitors_num_scale>=0?"up":"down"],attrs:{span:7}},[e("el-col",{staticClass:"trend",attrs:{span:9}},[e("i",{class:t.getIcon(a.row.visitors_num_scale)})]),e("el-col",{attrs:{span:15}},[t._v(" "+t._s(t.processNum(100*Math.abs(a.row.visitors_num_scale)))+"% ")])],1)],1)],1):e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openVisitorForm(a.row)}}},[t._v("-")])]}},{key:"conversion_ratio",fn:function(a){return[isNaN(a.row.conversion_ratio)?e("el-row",[t._v("-")]):e("el-row",[e("el-col",{attrs:{span:8}},[t._v(t._s(t.getRatio(a.row.conversion_ratio)))]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{attrs:{span:6}},[t._v(" "+t._s(t.getRatio(a.row.conversion_ratio_old))+" ")]),e("el-col",{class:[+a.row.conversion_ratio_scale>=0?"up":"down"],attrs:{span:8}},[e("el-col",{staticClass:"trend",attrs:{span:9}},[e("i",{class:t.getIcon(a.row.conversion_ratio_scale)})]),e("el-col",{attrs:{span:15}},[t._v(" "+t._s(t.getRatio(Math.abs(a.row.conversion_ratio_scale)))+" ")])],1)],1)]}},{key:"customer_unit_price",fn:function(a){return[e("el-row",[e("el-col",{attrs:{span:10}},[e("span",[t._v(t._s((+a.row.customer_unit_price).toFixed(1)||"-"))])]),e("el-col",{class:[+a.row.customer_unit_price_scale>=0?"up":"down"],attrs:{span:14}},[e("el-col",{staticClass:"trend",attrs:{span:10}},[e("i",{class:t.getIcon(a.row.customer_unit_price_scale)})]),e("el-col",{attrs:{span:14}},[t._v(" "+t._s(t.getRatio(Math.abs(a.row.customer_unit_price_scale)))+" ")])],1)],1)]}},{key:"customer_order",fn:function(a){return[e("el-row",[e("el-col",{attrs:{span:10}},[e("span",[t._v(t._s((+a.row.customer_order).toFixed(2)||"-"))])]),e("el-col",{class:[+a.row.customer_order_scale>=0?"up":"down"],attrs:{span:14}},[e("el-col",{staticClass:"trend",attrs:{span:10}},[e("i",{class:t.getIcon(a.row.customer_order_scale)})]),e("el-col",{attrs:{span:14}},[t._v(" "+t._s(t.getRatio(Math.abs(a.row.customer_order_scale)))+" ")])],1)],1)]}},{key:"out_of_stock",fn:function(a){return[a.row.shops||a.row.id>1e4||0==a.row.out_of_stock?e("span",[t._v(" - ")]):e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.openOutOfStockList(a.row)}}},[e("el-row",[e("el-col",{attrs:{span:10}},[e("span",[t._v(t._s(a.row.out_of_stock||"-"))])]),e("el-col",{class:[+a.row.out_of_stock_ratio>=0?"up":"down"],attrs:{span:14}},[e("el-col",{staticClass:"trend",attrs:{span:10}},[e("i",{class:t.getIcon(a.row.out_of_stock_ratio)})]),e("el-col",{attrs:{span:14}},[t._v(" "+t._s(t.getRatio(a.row.out_of_stock_ratio))+" ")])],1)],1)],1)]}},{key:"shelf_ratio",fn:function(a){return[a.row.shops||a.row.id>1e4?e("span",{staticClass:"text-orange"},[t._v(" "+t._s(t.processNum(100*a.row.shelf_ratio)+"%")+" ")]):e("span",{on:{click:function(e){return t.openUnshelvedList(a.row)}}},[e("el-link",{attrs:{type:"primary"}},[e("span",[t._v(t._s(a.row.shelf_ratio?t.processNum(100*a.row.shelf_ratio)+"%":"-"))])])],1)]}},{key:"auth_brand_num",fn:function(a){return[a.row.id>1e4?e("span",[e("el-link",{attrs:{type:"primary"},on:{click:t.openAuthBrandList}},[t._v(" "+t._s(a.row.auth_brand_num)+" ")])],1):a.row.shops?e("span",[t._v(" - ")]):e("span",[e("ShopAuthBrandList",{attrs:{row:a.row}})],1)]}},{key:"tese",fn:function(a){return[a.row.tese_name?e("el-row",[e("el-col",{attrs:{span:9}},[t._v(t._s(a.row.tese_name))]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{staticClass:"text-cyan",attrs:{span:5}},[t._v(" "+t._s(t.getRatio(a.row.tese_task_ratio))+" ")]),e("el-col",{staticClass:"divider",attrs:{span:2}},[t._v("|")]),e("el-col",{staticClass:"text-orange",attrs:{span:6}},[t._v(" "+t._s(t.getRatio(a.row.tese_real_ratio))+" ")])],1):e("span",[t._v("-")])]}},{key:"foreign_warehouse_sales",fn:function(a){return[e("el-link",{attrs:{type:10001==a.row.id?"info":"primary",underline:a.row.id<1e4},on:{click:function(e){return t.openWcSaleList(+a.row.id)}}},[e("el-row",[e("el-col",{attrs:{span:14}},[t._v(t._s(a.row.foreign_warehouse_sales))]),e("el-col",{staticClass:"divider",attrs:{span:3}},[t._v("|")]),e("el-col",{attrs:{span:7}},[t._v(t._s(t.getRatio(a.row.foreign_warehouse_sales_ratio)))])],1)],1)]}},{key:"task_finish_ratio",fn:function(a){return[e("div",{staticClass:"flex"},[t._v(" "+t._s((+a.row.monthly_tasks).toFixed()||"-")+" "),e("el-divider",{attrs:{direction:"vertical"}}),e("el-progress",{class:[t.getPercentage(+a.row.task_finish_ratio)<50?"p-lt-50":"p-gte-50"],attrs:{"text-inside":!0,"stroke-width":26,percentage:t.getPercentage(+a.row.task_finish_ratio),format:t._format(+a.row.task_finish_ratio)}})],1)]}}])})],1),e("ShopList",{ref:"shopList"}),e("WcSaleList",{ref:"wcSaleList"}),e("MulSaleList",{ref:"mulSaleList"}),e("VisitorForm",{ref:"visitorForm",on:{"on-search":t.handleUpdateVisitor}}),e("ExpenseRate",{ref:"expenseRate"}),e("OutOfStockList",{ref:"outOfStockList"}),e("UnshelvedList",{ref:"unshelvedList"}),e("AuthBrandBoard",{ref:"authBrandBoard"})],1)},o=[],r=a("c7eb"),i=a("1da1"),s=a("3835"),l=a("5530"),c=(a("d81d"),a("4e82"),a("b64b"),a("b0c0"),function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"search-form"},[e("el-form",{ref:"form",attrs:{model:t.form,size:"small",inline:""}},[e("el-form-item",{attrs:{label:"店铺："}},[e("el-select",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:t.form.null,callback:function(e){t.$set(t.form,"null",e)},expression:"form.null"}}),e("el-select",{staticStyle:{width:"250px"},attrs:{clearable:"",multiple:"",filterable:"","collapse-tags":"",placeholder:"请选择店铺，可搜索，可多选"},model:{value:t.form.groupValue,callback:function(e){t.$set(t.form,"groupValue",e)},expression:"form.groupValue"}},t._l(t.groupOptions,(function(a){return e("el-option",{key:a.value+"_"+a.label,attrs:{label:a.label,value:a.label}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(a.label))]),e("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e("el-tag",{attrs:{effect:"plain",type:t.shopOptionType[a.type].btnType}},[t._v(t._s(t.shopOptionType[a.type].itemLabel))])],1)])})),1),e("el-button-group",[e("el-button",{attrs:{type:"warning"},on:{click:t.onClearGroupSelect}},[t._v("清空")]),e("el-button",{attrs:{type:"primary"},on:{click:t.onSelectAllGroup}},[t._v("全选")])],1)],1),e("el-form-item",[e("el-button-group",{on:{change:t.handleChangeType}},t._l(t.typeOptions,(function(a){return e("el-button",{key:a.type,attrs:{type:a.type==t.form.type?"primary":""},on:{click:function(e){return t.handleChangeType({type:a.type})}}},[t._v(t._s(a.name))])})),1)],1),e("br"),e("el-form-item",{attrs:{label:"当前时间："}},[e("el-date-picker",{staticStyle:{width:"270px"},attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":{shortcuts:t.shortcuts}},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),e("el-form-item",{attrs:{label:"VS"}}),e("el-form-item",{attrs:{label:"对比时间："}},[e("el-date-picker",{staticStyle:{width:"270px"},attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.handleChangeDate},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),e("el-form-item",[e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.onExport}},[t._v("导出")])],1)],1)],1)],1)])}),p=[],u=(a("fb6a"),a("99af"),a("14d9"),a("a434"),a("4de4"),a("d3b7"),a("a15b"),a("159b"),a("cd05")),d=a("fa7d"),m=a("ed08"),f=a("d0f1"),h={1:{btnType:"success",itemLabel:"事业群"},2:{btnType:"primary",itemLabel:"店铺"}},_=[{name:"环比",type:2},{name:"同比",type:1}],b={1:"同比时间",2:"环比时间"},v={name:"SearchForm",mounted:function(){this.initOptions(),this.setDefaultDate(),this.onSearch()},data:function(){return{null:"",typeMap:b,typeOptions:_,form:{timeFrame:"day",time:[],date:[],groupValue:[],type:1,compare:0},shortcuts:f["a"],pickerOptions:{shortcuts:f["a"],disabledDate:function(t){return t.getTime()>Date.now()-864e5}},mainOptions:[],shopOptionType:h}},watch:{"form.timeFrame":{handler:function(){var t=Object(s["a"])(this.form.date,2),e=t[0],a=t[1];if("day"===this.form.timeFrame){var n=Object(m["a"])(new Date(e),"yyyy-MM-dd"),o=Object(m["a"])(new Date(a),"yyyy-MM-dd");this.form.date=[n.slice(0,10),o.slice(0,10)]}}},"form.date":{handler:function(){this.switchTime()}}},computed:{groupOptions:function(){var t,e,a=[],n=[];return null===(t=this.mainOptions)||void 0===t||t.map((function(t){var e;null===(e=t.child)||void 0===e||e.map((function(t){t.child&&(n=n.concat(t.child)),a.push({type:1,label:t.name,value:t.id})}))})),null===(e=n)||void 0===e||e.map((function(t){a.push({type:2,label:null===t||void 0===t?void 0:t.name,value:t.id})})),a}},methods:{initOptions:function(){this.getBusGroupOptions()},handleChangeDate:function(){this.form.type=3},handleDateChange:function(t){this.form.time=t},handleOptionChange:function(t){1!==t.length&&(-2===t[0]?this.form.groupValue=[-2]:-2===t[t.length-1]&&this.form.groupValue.splice(t.indexOf(-2),1))},handleChangeType:function(t){var e=t.type;this.form.type=e,this.switchTime()},handleClickBtn:function(t){var e=t.type;this.form.type=e},switchTime:function(){var t=Object(s["a"])(this.form.date,2),e=t[0],a=t[1],n=new Date(a)-new Date(e),o=new Date(Object(d["g"])(a));2==this.form.type&&(o=new Date(a),o.setDate(0));var r=o.getDate(),i=new Date(a).getDate(),l=new Date(a),c=new Date(e);if(i>=r)l=new Date(o),c=new Date(l-n);else{var p=86400*(r-i)*1e3;l=new Date(o-p),c=new Date(l-n)}c=Object(m["a"])(c,"yyyy-MM-dd"),l=Object(m["a"])(l,"yyyy-MM-dd"),this.form.time=[c,l]},getBusGroupOptions:function(){var t=this;Object(u["e"])().then((function(e){200===e.code&&(Object(d["e"])(e.data)||(t.mainOptions=e.data))}))},onSearch:function(){this.$emit("on-search",this._getFormData())},onExport:function(){this.$emit("on-export",this._getFormData())},setDefaultDate:function(){this.timeFrame="day";var t=Object(m["a"])(new Date,"yyyy-MM-dd");this.form.date=[t,t]},getFormData:function(){return Object(l["a"])({},this._getFormData())},_getFormData:function(){var t=this,e=Object.assign({},Object(l["a"])({},this.form));if(e.date?["startTime","endTime"].map((function(t,a){e[t]="month"===e.timeFrame?e["date"][a].slice(0,7):e["date"][a]})):(e["startTime"]="",e["endTime"]=""),3==this.form.type&&(e["comparison_start"]=this.form.time[0],e["comparison_end"]=this.form.time[1]),this.form.groupValue){var a,n=[],o=[];null===(a=this.form.groupValue)||void 0===a||a.map((function(e){var a=t.groupOptions.filter((function(t){return t.label==e}));if(1===a.length){var r=a[0];1===r.type?n.push(r.value):o.push(r.value)}})),n.length>0&&(e["business_group"]=n.join(",")),o.length>0&&(e["shop_ids"]=o.join(","))}return e},onSelectAllGroup:function(){var t=[];this.groupOptions.forEach((function(e){t.push(e.label)})),this.form.groupValue=t},onClearGroupSelect:function(){this.form.groupValue=[]}}},g=v,w=(a("5619"),a("2877")),y=Object(w["a"])(g,c,p,!1,null,"1dda6b9e",null),O=y.exports,x=a("dc19"),k=a("ac0d"),S=a("94b0"),j={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:80,align:"right",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",trend:"",icon:"el-icon-question",process:function(t){return isNaN(t)?t:Object(d["h"])(t)},subProcess:function(t){return(isNaN(t)?t+"%":Object(d["h"])(100*t))+"%"},trendProcess:function(t){return(isNaN(t)?t+"%":Object(d["h"])(100*t))+"%"},disabled:!1},D=[{prop:"店铺（群）",slotName:"title",title:"店铺（群）",tooltip:"一键展开/折叠",align:"left",cellClass:"pointer-cursor",minWidth:180,disabled:!0,fixed:!0,openAll:!0},{fixed:!0,slotName:"sale_amount",prop:"sale_amount",title:"销售额",tooltip:"根据配货时间，统计（待反馈，反馈成功，待退货，待退款，反馈失败）订单金额",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,sortable:"custom",disabled:!0,process:function(t){return""}},{slotName:"profit",prop:"profit",title:"利润 | 利润率",tooltip:"销售额-费用-商品成本）/销售额",minWidth:210,sortable:"custom",process:function(t){return""}},{slotName:"gross_profit",prop:"gross_profit",title:"毛利 | 毛利率",tooltip:"（销售额-商品成本）/销售额",minWidth:210,subClass:"text-orange",process:function(t){return""},sortable:"custom"},{slotName:"all_expenses",prop:"all_expenses",title:"费用 | 费用率",tooltip:"除了商品成本外的其他费用 / 销售额",minWidth:210,subClass:"text-orange",process:function(t){return""}},{slotName:"visitors_num",prop:"visitors_num",title:"访客数",tooltip:"店铺访客数（京东天猫抖音拼多多为系统自动获取前一天访客数）",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:210,process:function(t){return""},trendProcess:function(t){return""},trend:"visitors_num_scale"},{slotName:"conversion_ratio",prop:"conversion_ratio",title:"转化率",minWidth:180,tooltip:"成交客户数 / 访客数",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",process:function(t){return""},trendProcess:function(t){return""}},{slotName:"customer_unit_price",prop:"客单价",title:"客单价",tooltip:"销售额/成交客数",minWidth:130},{slotName:"shelf_ratio",prop:"shelf_ratio",title:"上架率",tooltip:"每日更新前一天上架率，实际上架数/应上架总数，按查询时间计算",process:function(t){return""}},{prop:"new_return_ratio",title:"退货率",tooltip:"每日更新前一天退货率【待退货|已退货】的订单量/【待退货|已退货|反馈成功】按查询时间计算",minWidth:100,process:function(t){return t?Object(d["h"])(100*+t)+"%":"-"}},{slotName:"tese",prop:"tese",title:"店铺特色",tooltip:"一个店铺只有一个特色品牌/品类",minWidth:200,process:function(t){return""}},{slotName:"customer_order",prop:"客单量",title:"客单量",tooltip:"成交单量/成交客数",minWidth:120},{slotName:"out_of_stock",prop:"",title:"缺货量|缺货率",tooltip:"当日无法做单（总库存-拉单库存为负值，按照下单时间排序优先级）/ 成交件数",minWidth:130,process:function(t){return""},subProcess:function(t){return""}},{prop:"goods_nums",title:"成交件数",tooltip:"订单量",minWidth:100},{prop:"customer_nums",title:"成交客数",tooltip:"平台 + 顾客昵称",checked:!1,minWidth:100},{prop:"order_nums",title:"成交单量",tooltip:"交易量",minWidth:100},{prop:"sale_discount",title:"销售折扣",tooltip:"售价 / 牌价",minWidth:100},{prop:"cost_amount",title:"商品成本",tooltip:"中台成本之和",checked:!1,minWidth:150},{prop:"total_market_amount",title:"牌价总额",tooltip:"牌价之和",checked:!1,minWidth:100},{slotName:"auth_brand_num",prop:"auth_brand_num",title:"授权品牌",minWidth:100,tooltip:"第三方配置",process:function(t){return""}},{slotName:"foreign_warehouse_sales",prop:"外仓销售额",title:"外仓销售额",subClass:"text-orange",tooltip:"配外仓的销售之和",minWidth:150},{fixed:"right",slotName:"leader",prop:"负责人",title:"负责人",icon:"",align:"left",disabled:!0},{slotName:"task_finish_ratio",prop:"月任务 | 完成率",title:"月任务 | 完成率",tooltip:"当月查询时间销售额/当月任务额，查询跨月按结束月计算",minWidth:200,fixed:"right",disabled:!0}],C=[{slotName:"order_date",prop:"order_date",title:"日期",tooltip:"日期",minWidth:110,fixed:!0,disabled:!0}].concat(D),F=function(){var t=this,e=t._self._c;return e("Win",{ref:"win",attrs:{title:t.title,top:"10vh"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("SearchForm",{ref:"searchForm",on:{"on-search":t.handleQuery,"on-export":t.exportData}})],1),e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"table-container"},[e("Table",{attrs:{loading:t.loading,columns:t.listCols,data:t.tableData,setColumn:!1,option:t.tableOption},on:{"sort-change":t.handleSortChange},scopedSlots:t._u([{key:"sale_amount",fn:function(a){return[e("span",[t._v(" "+t._s(t.processNum(a.row.sale_amount))+" ")])]}},{key:"profit",fn:function(a){return[e("span",{class:[a.row.profit>0?"":"text-cyan"]},[t._v(" "+t._s(t.processNum(a.row.profit))+" ")])]}},{key:"gross_profit",fn:function(a){return[e("span",{class:[a.row.gross_profit>0?"":"text-cyan"]},[t._v(" "+t._s(t.processNum(a.row.gross_profit))+" ")])]}},{key:"all_expenses",fn:function(a){return[e("span",[t._v(" "+t._s(t.processNum(a.row.all_expenses))+" ")])]}},{key:"visitors_num",fn:function(a){return[e("span",[t._v(" "+t._s(+a.row.visitors_num||"-")+" "),e("span",{class:[+a.row.visitors_num_scale>0?"up":"down"]},[e("i",{class:[+a.row.visitors_num_scale>0?"el-icon-top":"el-icon-bottom"]}),t._v(t._s(t.processNum(100*Math.abs(a.row.visitors_num_scale))+"%")+" ")])])]}},{key:"conversion_ratio",fn:function(a){return[t._v(" "+t._s(+a.row.visitors_num>0?t.processNum(100*+a.row.conversion_ratio)+"%":"-")+" "),+a.row.visitors_num>0?e("span",{class:[+a.row.conversion_ratio_scale>0?"up":"down"]},[e("i",{class:[+a.row.conversion_ratio_scale>0?"el-icon-top":"el-icon-bottom"]}),t._v(t._s(t.processNum(100*Math.abs(a.row.conversion_ratio_scale))+"%")+" ")]):t._e()]}},{key:"tese",fn:function(a){return[a.row.tese_name?e("span",[e("span",[t._v(t._s(a.row.tese_name))]),e("el-divider",{attrs:{direction:"vertical"}}),e("span",{staticClass:"text-cyan"},[t._v(t._s(a.row.tese_task_ratio))]),e("el-divider",{attrs:{direction:"vertical"}}),e("span",{staticClass:"text-orange"},[t._v(t._s(t.processNum(100*a.row.tese_real_ratio)+"%"))])],1):e("span",[t._v("-")])]}},{key:"out_of_stock",fn:function(a){return[a.row.out_of_stock?e("span",[t._v(" "+t._s(t.processNum(a.row.out_of_stock))+" ")]):e("span",[t._v("-")])]}},{key:"shelf_ratio",fn:function(a){return[e("span",{staticClass:"text-orange"},[t._v(" "+t._s(t.processNum(100*a.row.shelf_ratio)+"%")+" ")])]}},{key:"foreign_warehouse_sales",fn:function(a){return[e("span",[t._v(" "+t._s(a.row.foreign_warehouse_sales)+" ")])]}},{key:"task_finish_ratio",fn:function(a){return[e("el-progress",{class:[t.getPercentage(+a.row.task_finish_ratio)<50?"p-lt-50":"p-gte-50"],attrs:{"text-inside":!0,"stroke-width":26,percentage:t.getPercentage(+a.row.task_finish_ratio),format:t._format(+a.row.task_finish_ratio)}})]}}])},[e("template",{slot:"title"},[t._v(" "+t._s(t.row.shop_name)+" ")]),e("template",{slot:"leader"},[t._v(" "+t._s(t.row.shopowner)+" ")])],2)],1),e("Pagination",{ref:"pagination",attrs:{total:t.total},on:{"on-page-change":t.handleQuery,"on-page-size-change":t.handleQuery}})],1)])},N=[],L=a("f2bc"),T=(a("3b6a"),a("38f5")),W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-form"},[e("el-form",{ref:"form",attrs:{model:t.form,size:"small",inline:""}},[e("el-form-item",{attrs:{label:"时间："}},[e("el-radio-group",{model:{value:t.form.timeFrame,callback:function(e){t.$set(t.form,"timeFrame",e)},expression:"form.timeFrame"}},[e("el-radio-button",{attrs:{label:"day"}},[t._v("日")]),e("el-radio-button",{attrs:{label:"month"}},[t._v("月")])],1),e("span",{directives:[{name:"show",rawName:"v-show",value:"month"===t.form.timeFrame,expression:"form.timeFrame === 'month'"}],staticClass:"monthSelect"},[e("el-date-picker",{staticStyle:{width:"270px"},attrs:{type:"monthrange","range-separator":"~","value-format":"yyyy-MM-dd",format:"yyyy年MM月","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),e("span",{directives:[{name:"show",rawName:"v-show",value:"day"===t.form.timeFrame,expression:"form.timeFrame === 'day'"}],staticClass:"daySelect"},[e("el-date-picker",{staticStyle:{width:"270px"},attrs:{type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),e("el-button",{attrs:{type:"warning"},on:{click:t.onClearDateSelect}},[t._v("清空")])],1),e("el-form-item",[e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.onExport}},[t._v("导出")])],1)],1),e("el-form-item",{attrs:{label:"快捷操作："}},[e("el-button-group",{directives:[{name:"show",rawName:"v-show",value:"month"===t.form.timeFrame,expression:"form.timeFrame === 'month'"}]},[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearchThisMonth}},[t._v("查询当月")])],1),e("el-button-group",{directives:[{name:"show",rawName:"v-show",value:"day"===t.form.timeFrame,expression:"form.timeFrame === 'day'"}]},[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearchToday}},[t._v("查询当日")])],1)],1)],1)],1)},$=[],M={name:"SearchForm",mounted:function(){this.init()},data:function(){return{shopOptions:[],form:{shopIdArr:[],maintainerArr:[],timeFrame:"day",date:[],isSplit:!0},pickerOptions:{shortcuts:f["a"]}}},methods:{setDate:function(t){this.$set(this.form,"date",t)},setShop:function(t){this.$set(this.form,"shopIdArr",[t])},init:function(){this.getShopOptions()},getFormData:function(){return Object(l["a"])({},this._getFormData())},onSelectAllShop:function(){var t=this.shopOptions.map((function(t){return t.value}));this.form.shopIdArr=t},onClearShopSelect:function(){this.form.shopIdArr=[]},onClearDateSelect:function(){this.form.date=[]},onSearch:function(){this.$emit("on-search",this._getFormData())},onSearchToday:function(){this.form.timeFrame="day";var t=Object(m["a"])(new Date,"yyyy-MM-dd");this.form.date=[t,t],this.onSearch()},onSearchThisMonth:function(){this.form.timeFrame="month";var t=Object(m["a"])(new Date,"yyyy-MM-dd");this.form.date=[t,t],this.onSearch()},onExport:function(){this.$emit("on-export",this._getFormData())},onExportToday:function(){var t=Object(m["a"])(new Date,"yyyy-MM-dd"),e=this._getFormData();this.$emit("on-export",Object(l["a"])(Object(l["a"])({},e),{},{startDate:t,endDate:t}))},onExportThisMonth:function(){var t=Object(m["a"])(new Date,"yyyy-MM"),e=this._getFormData();this.$emit("on-export",Object(l["a"])(Object(l["a"])({},e),{},{startDate:t,endDate:t}))},_getFormData:function(){var t,e=Object.assign({},Object(l["a"])({},this.form));return e.date?["start_time","end_time"].map((function(t,a){e[t]="month"===e.timeFrame?e["date"][a].slice(0,7):e["date"][a]})):(e["start_time"]="",e["end_time"]=""),e["shop_id"]=null===(t=this.form.shopIdArr)||void 0===t?void 0:t.join(","),e},getShopOptions:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["l"])();case 2:a=e.sent,t.shopOptions=a.data.filter((function(t){return 1==t.type})).map((function(t){return{value:t.id,label:t.name,type:t.type}}));case 4:case"end":return e.stop()}}),e)})))()}}},z=M,P=(a("fbfa"),Object(w["a"])(z,W,$,!1,null,"1e3e0ad6",null)),I=P.exports,A={name:"ShopList",mixins:[k["a"],k["c"]],components:{Table:x["a"],Pagination:T["a"],Win:L["a"],SearchForm:I},computed:{getPercentage:function(){return function(t){var e=parseFloat((100*+t).toFixed(1));return e>100?100:e}},processNum:function(){return function(t){return Object(d["h"])(t)}}},created:function(){this.listCols=C.filter((function(t){return"auth_brand_num"!=t.prop})).map((function(t){return t.prop.indexOf("out_of_stock")>-1&&(t.title="缺货率"),Object(l["a"])(Object(l["a"])({},j),t)}))},data:function(){return{visible:!1,ids:[],goodsNo:"",title:"",tableData:[],params:{},row:{},tableOption:{ref:"ShopList",key:"ShopList",selectable:!1,showSummary:!1},total:0}},methods:{open:function(){return this.$refs.win.open(),this},init:function(t){var e=this;this.$nextTick((function(){e.$refs.searchForm.setDate([t.startTime,t.endTime]),e.$refs.searchForm.setShop(t.shop_id),e.row=t,e.title="店铺分日销售表",e.params={type:t.type,shopId:t.shop_id},e.handleQuery({})}))},_format:function(t){return function(){var e=parseFloat((100*+t).toFixed(1));return e+"%"}},handleSortChange:function(t){var e,a=t.prop,n=t.order;if(Object(d["e"])(n))e="";else{var o="descending"===n?"desc":"asc";e=a+"|"+o}this.handleQuery({sort:e})},exportData:function(){var t,e=null===(t=this.$refs.searchForm)||void 0===t?void 0:t.getFormData(),a=Object(l["a"])({},e);console.info(a),Object(S["c"])(Object(l["a"])({},a))},handleQuery:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function a(){var n,o,i,s,c;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.sort,i=null===(n=e.$refs.searchForm)||void 0===n?void 0:n.getFormData(),s=Object(l["a"])(Object(l["a"])({},i),{},{sort:o}),e.openLoading(),a.next=6,Object(S["g"])(Object(l["a"])({},s));case 6:c=a.sent,e.closeLoading(),e.tableData=c.data||[],e.total=+c.total;case 10:case"end":return a.stop()}}),a)})))()}}},B=A,R=(a("4d6c"),Object(w["a"])(B,F,N,!1,null,"400b55a5",null)),G=R.exports,E=function(){var t=this,e=t._self._c;return e("Win",{ref:"win",attrs:{title:t.title,top:"10vh"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("el-form",{attrs:{inline:!0,model:t.form}})],1),e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"table-container"},[e("Table",{attrs:{loading:t.loading,columns:t.listCols,data:t.tableData,setColumn:!1,option:t.tableOption,"row-key":"id"},on:{"sort-change":t.onSortChange}})],1)])])},V=[],Q=(a("13d5"),a("a9e3"),a("1da3")),q={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:80,align:"right",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",trend:"",process:function(t){return isNaN(t)?t:Object(d["h"])(t)},subProcess:function(t){return(isNaN(t)?t+"%":Object(d["h"])(100*t))+"%"},trendProcess:function(t){return(isNaN(t)?t+"%":Object(d["h"])(100*t))+"%"},disabled:!1},H=[{prop:"标题",slotName:"title",title:"标题",align:"left",minWidth:180,disabled:!0,fixed:!0,openAll:!0},{disabled:!0,prop:"sale_amount",subProp:"sale_amount_ratio",title:"销售额 | 占比",icon:"el-icon-question",tooltip:"反馈成功金额",minWidth:180,sortable:!0,subClass:"text-orange"},{prop:"order_num",title:"订单数量",minWidth:130,sortable:!0,process:function(t){return(+t).toFixed(0)}},{prop:"unit_price",title:"件单价",minWidth:150},{slotName:"gross_profit",prop:"gross_profit",subProp:"gross_profit_ratio",title:"毛利 | 毛利率",tooltip:"（销售额-商品成本）/销售额",icon:"el-icon-question",minWidth:230,subClass:"text-orange",process:function(t){return""},sortable:"custom"},{prop:"cost_amount",title:"商品成本",minWidth:110},{prop:"avg_cost_per_amount",title:"平均商品成本",minWidth:110},{prop:"total_market_amount",title:"牌价总额",minWidth:100},{prop:"discount",title:"折扣",minWidth:100}],U=[{prop:"shop_name",title:"店铺",align:"left",minWidth:150,disabled:!0},{disabled:!0,prop:"sale_amount",title:"总销售",tooltip:"",sortable:!0,minWidth:120},{prop:"total_out_sale_amount",title:"外仓总销售",class:"text-cyan",sortable:!0,minWidth:120},{prop:"total_out_ratio",title:"外仓销售占比",class:"text-cyan",minWidth:130,sortable:!0,process:function(t){return Object(d["h"])(100*+t)+"%"}},{prop:"foreign_sale_amount",title:"一级外仓总销售",class:"text-orange",sortable:!0,minWidth:150},{prop:"foreign_out_ratio",title:"占外仓比",class:"text-orange",minWidth:120,sortable:!0,process:function(t){return Object(d["h"])(100*+t)+"%"}},{prop:"ratio",title:"占总销售比",class:"text-orange",minWidth:120,sortable:!0,process:function(t){return Object(d["h"])(100*+t)+"%"}}],J=[{prop:"shop_name",title:"店铺",align:"left"},{prop:"goods_no",title:"货号",align:"center",tooltip:""},{prop:"size1",title:"尺码",align:"center"},{prop:"num",title:"数量",align:"center"},{prop:"order_date",title:"日期",align:"center"}],K=[{slotName:"brand",prop:"品牌",title:"品牌",align:"left"},{slotName:"pic",prop:"图片",title:"图片",align:"center"}],X={name:"WcSaleList",mixins:[k["c"]],components:{Table:x["a"],Win:L["a"]},computed:{processNum:function(){return function(t,e,a,n){return e.property.indexOf("ratio")>-1?Object(d["h"])(100*+a)+"%":Object(d["h"])(a)}}},beforeCreate:function(){this.listCols=null===U||void 0===U?void 0:U.map((function(t){return Object(l["a"])(Object(l["a"])({},q),t)}))},data:function(){return{visible:!1,ids:[],goodsNo:"",title:"",shopOptions:[],form:{shop:[],date:[]},tableData:[],tableOption:{ref:"wcSaleList",key:"wcSaleList",defaultSort:{prop:"sale_amount",order:"descending"}}}},methods:{open:function(){return this.$refs.win.open(),this.tableData=[],this},init:function(t){var e=t.date;this.$set(this.form,"date",e),this.title="外仓销售分析报表",this.getData()},initShopOptions:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var a,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Q["b"])({goods_no:""});case 2:n=e.sent,t.shopOptions=null===n||void 0===n||null===(a=n.root)||void 0===a?void 0:a.map((function(t){return{value:t.id,label:t.name}}));case 4:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var a,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.openLoading(),a={start_time:t.form.date[0],end_time:t.form.date[1]},e.next=4,Object(S["h"])(a);case 4:n=e.sent,t.tableData=n.data.map((function(t){return Object(l["a"])(Object(l["a"])({},t),{},{sale_amount:+t.sale_amount})})),t.closeLoading();case 7:case"end":return e.stop()}}),e)})))()},onSortChange:function(t){var e=t.column,a=t.prop,n=t.order;Object(d["i"])({column:e,prop:a,order:n},this.tableData)},getSummary:function(t){var e=t.columns,a=t.data,n=[],o={},r={"yesterday.sale_amount":0,"yesterday.foreign_sale_amount":0,"yesterday.ratio":"0%","seven_days.sale_amount":0,"seven_days.foreign_sale_amount":0,"seven_days.ratio":"0%"};return e.forEach((function(t,e){if(0===e)return n[e]="合计",void(o["合计"]=0);o[t.property]=e;var i=a.map((function(e){var a=t.property.indexOf("."),n=t.property.slice(0,a),o=t.property.slice(a+1,t.property.length);return+e[n][o]}));if(i.every((function(t){return isNaN(t)})))n[e]="/";else if(n[e]=i.reduce((function(t,e){var a=Number(e);return isNaN(a)?t:t+e}),0),t.property.indexOf("sale_amount")>-1)r[t.property]=n[e],n[e]=parseFloat(n[e].toFixed(0));else if(t.property.indexOf("ratio")>-1){var s=t.property.indexOf("ratio"),l=t.property.slice(0,s),c="0%";0!=r[l+"sale_amount"]&&(c=parseFloat((r[l+"foreign_sale_amount"]/r[l+"sale_amount"]*100).toFixed(2))+"%",n[e]=c)}})),n}}},Y=X,Z=(a("6226"),Object(w["a"])(Y,E,V,!1,null,"04f9dc35",null)),tt=Z.exports,et=function(){var t=this,e=t._self._c;return e("Win",{ref:"win",attrs:{title:t.title,top:"10vh"}},[e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"flex-space"},[e("el-radio-group",{staticClass:"dimension-group",model:{value:t.dimension,callback:function(e){t.dimension=e},expression:"dimension"}},t._l(t.dimensionList,(function(a){return e("el-radio",{key:a.prop,attrs:{label:a.label},on:{change:t.handleQuery}})})),1),e("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:"货号统计"==t.dimension||"尺码2统计"==t.dimension,expression:"dimension == '货号统计' || dimension == '尺码2统计'"}],attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("div",[e("b",{staticClass:"text-white"},[t._v("Top ")]),e("el-button",{attrs:{type:"text",size:"small"}},[t._v(" "+t._s(t.limit)),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.limitList,(function(a){return e("el-dropdown-item",{key:a,attrs:{command:a}},[t._v(t._s(a))])})),1)],1)],1),e("div",{staticClass:"table-container"},[e("Table",{attrs:{loading:t.loading,columns:t.listCols,data:t.tableData,setColumn:!1,option:t.tableOption,"row-key":"id"},on:{"sort-change":t.onSortChange},scopedSlots:t._u([{key:"title",fn:function(e){return[t._v(" "+t._s(e.row.title)+" ")]}},{key:"gross_profit",fn:function(a){return[e("span",{class:[a.row.gross_profit>0?"":"text-cyan"]},[t._v(" "+t._s(t.processNum(a.row.gross_profit))+" ")])]}}])})],1)])])},at=[],nt=[20,50,100,200],ot=[{label:"店铺分布统计",prop:"shop"},{label:"品牌分布统计",prop:"brand"},{label:"二级分类统计",prop:"cate2"},{label:"商品季节统计",prop:"season"},{label:"退回原因统计",prop:"return_reason"},{label:"尺码2统计",prop:"size2"},{label:"货号统计",prop:"goods_no"}],rt={"店铺分布统计":"shop","品牌分布统计":"brand","二级分类统计":"cate2","货号统计":"goods_no","商品季节统计":"season","退回原因统计":"return_reason","尺码2统计":"size2"},it={name:"MulSaleList",mixins:[k["a"],k["c"]],components:{Table:x["a"],Pagination:T["a"],Win:L["a"]},computed:{processNum:function(){return function(t){return Object(d["h"])(t)}}},created:function(){this.listCols=H.map((function(t){return Object(l["a"])(Object(l["a"])({},q),t)}))},data:function(){return{visible:!1,ids:[],goodsNo:"",title:"",tableData:[],limit:nt[0],tableOption:{ref:"MulSaleList",key:"MulSaleList",showSummary:!1,defaultSort:{prop:"sale_amount",order:"descending"}},total:0,dimension:"店铺分布统计",dimensionList:ot,limitList:nt,params:{}}},methods:{open:function(){return this.$refs.win.open(),this.tableData=[],this},init:function(t){var e="";this.params={start_time:t.startTime,end_time:t.endTime},t.title?(e=t.title,this.params["group_id"]=t.id):(e=t.shop_name,this.params["shop_id"]=t.shop_id),this.title=e+" "+t.startTime+" ~ "+t.endTime+" 店铺多维度分析",this.handleQuery()},_format:function(t){return function(){var e=parseFloat((100*+t).toFixed(1));return e+"%"}},handleQuery:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var a,n,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.params,"goods_no"==rt[t.dimension]||"size2"==rt[t.dimension]?n["limit"]=t.limit:null===n||void 0===n||delete n.limit,t.openLoading(),e.next=5,Object(S["j"])(Object(l["a"])({dimension:rt[t.dimension]},n));case 5:o=e.sent,t.closeLoading(),t.tableData=(null===(a=o.data)||void 0===a?void 0:a.map((function(t){return Object(l["a"])(Object(l["a"])({},t),{},{sale_amount:+t.sale_amount})})))||[],t.total=+o.total;case 9:case"end":return e.stop()}}),e)})))()},onSortChange:function(t){var e=t.column,a=t.prop,n=t.order;Object(d["i"])({column:e,prop:a,order:n},this.tableData)},exportData:function(){var t=this.params;"goods_no"==rt[this.dimension]||"size2"==rt[this.dimension]?t["limit"]=this.limit:null===t||void 0===t||delete t.limit,Object(S["c"])(Object(l["a"])({},t))},handleCommand:function(t){this.limit=this.limitList.filter((function(e){return e==t}))[0],this.handleQuery()}}},st=it,lt=(a("db4b"),Object(w["a"])(st,et,at,!1,null,"e07276d4",null)),ct=lt.exports,pt=function(){var t=this,e=t._self._c;return e("Win",{ref:"win",attrs:{title:"编辑访客",top:"30vh",width:"500px"}},[e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("el-form",{ref:"ruleForm",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"",prop:"is_visitor"}},[e("el-checkbox",{model:{value:t.form.is_visitor,callback:function(e){t.$set(t.form,"is_visitor",e)},expression:"form.is_visitor"}},[e("b",[t._v("无需展示访客")])])],1),e("el-form-item",{attrs:{required:"",label:"访客",prop:"visitor",rules:[{required:!0,message:"访客不能为空"},{type:"number",message:"访客必须为数字值"}]}},[e("el-input",{model:{value:t.form.visitor,callback:function(e){t.$set(t.form,"visitor",t._n(e))},expression:"form.visitor"}})],1),e("el-form-item",{staticClass:"submit-group"},[e("el-button",{staticClass:"form-btn cancel",attrs:{type:"info"},on:{click:t.resetForm}},[t._v("取消")]),e("el-button",{staticClass:"form-btn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1)],1)],1)])},ut=[],dt={name:"AddLiveBroadcast",data:function(){return{loading:!1,visible:!1,id:"",form:{is_visitor:!1,visitor:""}}},components:{Win:L["a"]},methods:{open:function(){return this.$refs.win.open(),this.clear(),this},init:function(t){t&&(this.$set(this.form,"visitor",t.visitor),this.$set(this.form,"is_visitor",0==+t.is_visitor),this.id=t.id,this.shop_id=t.shop_id,this.date=t.date)},clear:function(){delete this.form.is_visitor,delete this.form.visitor},onSetVisitor:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(S["n"])(t);case 2:if(n=a.sent,200!=n.code){a.next=8;break}return e.visible=!1,e.$notify({type:"success",title:n.msg,offset:0}),e.$refs.win.close(),a.abrupt("return",e.$emit("on-search",{}));case 8:e.$notify({type:"error",title:n.msg,offset:0});case 9:case"end":return a.stop()}}),a)})))()},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var a={id:e.shop_id,date:e.date,is_visitor:e.form.is_visitor?0:1,visitor:e.form.visitor};e.onSetVisitor(a)}}))},resetForm:function(){this.$refs.win.close()}}},mt=dt,ft=(a("8684"),Object(w["a"])(mt,pt,ut,!1,null,"1b6f7f0e",null)),ht=ft.exports,_t=function(){var t=this,e=t._self._c;return e("Win",{ref:"win",attrs:{title:t.title,width:"700px",top:"5vh"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"button-container"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"small"},on:{click:t.onExport}},[t._v("导出")])],1),e("div",{staticClass:"table-container"},[e("el-table",{staticStyle:{width:"500px"},attrs:{data:t.tableData,border:"",size:"small","row-key":"id","default-expand-all":"","cell-style":t.getColumnCellStyle,"header-cell-style":t.getHeaderCellStyle,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[e("el-table-column",{attrs:{prop:"name",label:"指标",width:"300"}}),e("el-table-column",{attrs:{prop:"data",align:"right",label:"金额"}}),e("el-table-column",{attrs:{prop:"percent",align:"right",label:"占比"}})],1)],1)])])},bt=[],vt=a("398e"),gt={name:"ShopFinanceDetailWin",components:{Win:L["a"]},data:function(){return{showTableField:["profit","sale_amount","cost_amount","gross_profit","all_expenses","plat_commissions","plat_marketing_expenses","other_expenses","marketing_expenses","post_expenses","return_expenses","labor_cost_expenses","manage_expenses","interest_expenses","shop_people_nums","shop_funds","plat_other_expenses"],tableData:[],financeFieldTitle:vt["a"],baseTitle:"店铺利润详情",shopName:"",date:"",id:0,timeFrame:""}},computed:{title:function(){return"「 "+this.shopName+" "+this.date+" 」"+this.baseTitle}},methods:{open:function(){return this.clear(),this.$refs.win.open(),this},close:function(){this.$refs.win.close()},clear:function(){return this.tableData=[],this},init:function(t){var e=this,a=t.id,n=t.timeFrame;this.id=a,this.timeFrame=n,Object(u["j"])({id:a,timeFrame:n}).then((function(t){200==t.code&&e.setData(t.data)}))},setData:function(t){var e=[];this.shopName=t.shop_name,this.date=t.date;var a=0;this.showTableField.forEach((function(n){a++;var o={};if(o["id"]=a,o["name"]=t.lists[n].title||"",o["data"]="shop_people_nums"!==n?Object(d["e"])(t.lists[n].amount)?0:(+t.lists[n].amount).toFixed(2):t.lists[n].amount+"人",o["percent"]=t.lists[n].pro,t.lists[n].hasOwnProperty("child")&&!Object(d["e"])(t.lists[n].child)){var r=[];t.lists[n].child.forEach((function(t){a++,r.push({id:a,name:t.title?"- "+t.title:"",data:t.amount,percent:t.pro})})),o["children"]=r}e.push(o)})),this.tableData=e},onExport:function(){Object(u["b"])({id:this.id,timeFrame:this.timeFrame})},getColumnCellStyle:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;switch(e){case 0:return"color: #ccc; font-size: 16px; border-color: #595959;";default:return"color: #e6db74; border-color: #595959;"}},getHeaderCellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex}}},wt=gt,yt=(a("2d23"),Object(w["a"])(wt,_t,bt,!1,null,"ec6e7260",null)),Ot=yt.exports,xt=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("el-popover",{ref:"popover",attrs:{placement:"left",trigger:"click","popper-class":"popover",title:"店铺授权品牌"},model:{value:a.data.visible,callback:function(e){t.$set(a.data,"visible",e)},expression:"data.visible"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.data.loading,expression:"data.loading"}],staticClass:"brand-table",attrs:{height:"250",data:a.data.tableData,border:""}},[e("el-table-column",{attrs:{prop:"no",label:"序号","min-width":"70","header-align":"center",align:"center"}}),e("el-table-column",{attrs:{prop:"brand",label:"品牌","min-width":"150","header-align":"center",align:"center"}}),e("el-table-column",{attrs:{prop:"sales_rate",label:"上月品牌销售占比","min-width":"150","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s((100*+e.row.sales_rate).toFixed(2))+"% ")]}}])},[e("template",{slot:"header"},[e("el-tooltip",{attrs:{content:"当前月的上月店铺品牌销售额占比",placement:"top",effect:"light"}},[e("span",{staticClass:"cursor-pointer"},[t._v(" 上月品牌销售占比"),e("i",{staticClass:"el-icon-question"})])])],1)],2),e("el-table-column",{attrs:{prop:"expire_time",label:"过期时间","min-width":"100","header-align":"center",align:"center"}})],1),e("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(" "+t._s(a.row.auth_brand_num)+" ")])],1)},kt=[],St=a("2b0e"),jt={__name:"shop-auth-brand-list",props:{row:Object,listCols:Array},setup:function(t){var e=t,a=Object(St["toRefs"])(e),n=a.row,o=Object(St["reactive"])({visible:!1,loading:!1,tableOption:{ref:"authBrandList",key:"authBrandList"},tableData:[]});Object(St["watch"])((function(){return o.visible}),(function(t){o.tableData=[],t&&s()}));var s=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.loading=!0,e={shop_id:n.value.shop_id,shop_name:n.value.shop_name},t.next=4,Object(S["f"])(e);case 4:a=t.sent,o.tableData=a.data,o.loading=!1;case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{__sfc:!0,props:e,row:n,data:o,getData:s}}},Dt=jt,Ct=(a("ba81"),Object(w["a"])(Dt,xt,kt,!1,null,null,null)),Ft=Ct.exports,Nt=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e(a.Win,{ref:"win",attrs:{title:"缺货信息列表",top:"10vh"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("el-form",{attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"时间"}},[e("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"选择日期","end-placeholder":"选择日期","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日"},model:{value:a.data.date,callback:function(e){t.$set(a.data,"date",e)},expression:"data.date"}})],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:a.getData}},[t._v("查询")])],1)],1)],1),e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"table-container"},[e(a.Table,{attrs:{loading:a.data.loading,columns:a.data.listCols,data:a.data.tableData,setColumn:!1,option:a.data.tableOption,"row-key":"id"}})],1)])])},Lt=[],Tt={__name:"out-of-stock",setup:function(t,e){var a=e.expose,n=Object(St["ref"])(),o=Object(St["reactive"])({loading:!1,listCols:J.map((function(t){return Object(l["a"])(Object(l["a"])({},q),t)})),tableOption:{key:"outOfStockList",ref:"outOfStockList"},tableData:[],date:[]}),s=function(t){var e=t.date,a=t.shop_id;n.value.open(),o.date=e,o.shopId=a,c()},c=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={shop_id:o.shopId,start_time:o.date[0],end_time:o.date[1]},t.next=3,Object(S["l"])(e);case 3:a=t.sent,o.tableData=a.data||[];case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return a({open:s}),{__sfc:!0,win:n,data:o,open:s,getData:c,Win:L["a"],Table:x["a"]}}},Wt=Tt,$t=(a("31f9"),Object(w["a"])(Wt,Nt,Lt,!1,null,"6db42e7a",null)),Mt=$t.exports,zt=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e(a.Win,{ref:"win",attrs:{title:a.data.title,top:"10vh"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("el-form",{attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"品牌"}},[e("el-input",{attrs:{size:"small",placeholder:"请输入品牌"},model:{value:a.data.brand,callback:function(e){t.$set(a.data,"brand",e)},expression:"data.brand"}})],1),e("el-form-item",[e("el-button-group",[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:a.getData}},[t._v("查询")]),e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:a.exportData}},[t._v("导出")])],1)],1),e("el-form-item",{attrs:{label:""}},[e("div",{staticStyle:{color:"gold"}},[t._v("检验时间："+t._s(a.data.time))])])],1)],1),e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"table-container"},[e(a.Table,{attrs:{loading:a.data.loading,columns:a.data.listCols,data:a.data.tableData,setColumn:!1,option:a.data.tableOption,"row-key":"id",lazy:"",load:a.load,"tree-props":{hasChildren:"expand"}},scopedSlots:t._u([{key:"brand",fn:function(a){return[t._v(" "+t._s(a.row.brand)+" "),a.row.sum?e("span",[t._v(" （"+t._s(a.row.sum)+"） ")]):t._e()]}},{key:"pic",fn:function(a){return["-"!=a.row.pic?e("el-image",{staticClass:"img-card",attrs:{src:a.row.pic,"preview-src-list":[a.row.pic]}}):e("span",[t._v("-")])]}}])})],1)])])},Pt=[],It={__name:"unshelved-list",setup:function(t,e){var a=e.expose,n=Object(St["ref"])(),o=Object(St["reactive"])({brand:"",title:"",loading:!1,listCols:K.map((function(t){return Object(l["a"])(Object(l["a"])({},q),t)})),tableOption:{key:"unshelvedListTable",ref:"unshelvedListTable"},tableData:[]}),s=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,a,n){var i,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={shop_id:o.shop_id,brand:e.brand},t.next=3,Object(S["i"])(i);case 3:s=t.sent,n(s.root);case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),c=function(t){var e=t.shop_name,a=t.shop_id;o.tableData=[],n.value.open(),o.title="【"+e+"】未上架商品",o.shop_id=a,Object(St["nextTick"])((function(){p()}))},p=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={shop_id:o.shop_id,brand:o.brand},t.next=3,Object(S["m"])(e);case 3:a=t.sent,o.tableData=a.root||[],o.time=a.time;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t={shop_id:o.shop_id};o.brand&&(t.brand=o.brand),Object(S["d"])(t)};return a({open:c}),{__sfc:!0,win:n,data:o,load:s,open:c,getData:p,exportData:u,Win:L["a"],Table:x["a"]}}},At=It,Bt=(a("2fbd"),Object(w["a"])(At,zt,Pt,!1,null,"567234ec",null)),Rt=Bt.exports,Gt=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e(a.Win,{ref:"win",attrs:{title:a.data.title,top:"10vh"}},[e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"table-container"},[e("el-table",{attrs:{data:a.data.tableData,"cell-class-name":a.handleCellClassName},on:{"sort-change":a.handleSortChange}},[e("el-table-column",{attrs:{label:"序号","header-align":"center",prop:"sort",width:"70",align:"center"}}),e("el-table-column",{attrs:{label:"即将到期标红底","header-align":"center"}},[e("el-table-column",{attrs:{prop:"top_cname",label:"一级类目",minWidth:"120","header-align":"center",align:"center"}})],1),e("el-table-column",{attrs:{label:"已到期未下架标紫底","header-align":"center",align:"center"}},[e("el-table-column",{attrs:{prop:"brand_sum",minWidth:"150","header-align":"center",align:"center"}})],1),e("el-table-column",{attrs:{label:"小计",minWidth:"100",prop:"sum","header-align":"center",align:"center"}}),t._l(a.data.plats,(function(a){return e("el-table-column",{key:a.plat,attrs:{label:a.plat,minWidth:"100","header-align":"center"}},t._l(a.shops,(function(t){return e("el-table-column",{key:t,attrs:{label:t,prop:"auth_brand_num."+a.plat+"."+t+".num",minWidth:"100","header-align":"center",align:"center"}})})),1)}))],2)],1)])])},Et=[],Vt={__name:"auth-brand-board",setup:function(t,e){var a=e.expose,n=Object(St["ref"])(),o=Object(St["reactive"])({visible:!1,title:"",loading:!1,tableOption:{ref:"authBrandList",key:"authBrandList"},plats:[],tableData:[],sort:""}),s=function(){n.value.open(),o.title="授权品牌看板",Object(St["nextTick"])((function(){l()}))},l=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={sort:o.sort},t.next=3,Object(S["k"])(e);case 3:a=t.sent,o.plats=a.root.plats,o.tableData=a.root.tableData;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(t){var e=t.row,a=(t.column,t.rowIndex),n=t.columnIndex,o="";if(n>2&&a>3){var r=Object.keys(e.auth_brand_num),i=[];null===r||void 0===r||r.map((function(t,a){i.push({shops:Object.keys(e.auth_brand_num[t]),plat:t})}));var s=function(t,e){var a=t.map((function(t){return t.shops.length}));return a.slice(0,e).reduce((function(t,e){return isNaN(e)?t:t+e}),0)};null===i||void 0===i||i.map((function(t,a){var r,l=3+s(i,a);null===(r=t.shops)||void 0===r||r.map((function(a,r){l+r===n&&(o=e.auth_brand_num[t.plat][a].status)}))}))}return 0===o?"bg-red":1===o?"bg-purple":void 0},p=function(t){var e,a=t.prop,n=t.order;if(n){var r="descending"===n?"desc":"asc";e=a+"|"+r}else e="";o.sort=e,l()};return a({open:s}),{__sfc:!0,win:n,data:o,open:s,getData:l,handleCellClassName:c,handleSortChange:p,Win:L["a"]}}},Qt=Vt,qt=(a("179f"),Object(w["a"])(Qt,Gt,Et,!1,null,"4aeebb24",null)),Ht=qt.exports,Ut={name:"AnalysisCenter",computed:{getPercentage:function(){return function(t){var e=parseFloat((100*+t).toFixed(1));return e>100?100:e}},processNum:function(){return function(t){return Object(d["h"])(t)}},getIcon:function(){return function(t){return+t>=0?"el-icon-top":"el-icon-bottom"}},getRatio:function(){return function(t){return t?isNaN(t)?t:Object(d["h"])(100*+t)+"%":"-"}}},mixins:[k["d"],k["c"],k["a"]],components:{SearchForm:O,Table:x["a"],ShopList:G,WcSaleList:tt,MulSaleList:ct,VisitorForm:ht,ExpenseRate:Ot,ShopAuthBrandList:Ft,OutOfStockList:Mt,UnshelvedList:Rt,AuthBrandBoard:Ht},created:function(){this.listCols=D.map((function(t){return Object(l["a"])(Object(l["a"])({},j),t)}))},data:function(){return{tableData:[],tableOption:{ref:"analysisCenter",key:"analysisCenter",backendSummary:!0,defaultSort:{prop:"sale_amount",order:"descending"},tips:"点击【事业群】展开店铺列表，点击表头【店铺（群）】可一键展开/折叠，单击行【店铺】展开店铺运营分析页，单击行【外仓销售额】展开外仓销售报表，单击行【销售额】展开多维分析报表，单击【访客】编辑"},total:0,expand:!1}},mounted:function(){window.addEventListener("resize",(function(){var t=document.getElementsByClassName("search-container")[0],e=document.getElementsByClassName("table-container")[0];t.offsetHeight>100?e.style.height="80vh":t.offsetHeight<=100&&(e.style.height="85vh")}),!0)},methods:{openExpenseRate:function(t){var e=this;if(!t.shops){var a=this.$refs.searchForm.getFormData();this.$nextTick((function(){e.$refs.expenseRate.open().init({id:t.id,timeFrame:a.timeFrame})}))}},openAuthBrandList:function(){var t=this;this.$nextTick((function(){t.$refs.authBrandBoard.open()}))},openShopList:function(t){var e=this.$refs.searchForm.getFormData();this.$refs.shopList.open().init(Object(l["a"])(Object(l["a"])({},t),e))},openVisitorForm:function(t){if(!t.shops){var e=this.$refs.searchForm.getFormData();if(e.startTime!=e.endTime)return this.$message.error("只允许修改单日访客");this.$refs.visitorForm.open().init({id:t.id,shop_id:t.shop_id,visitor:+t.visitors_num,is_visitor:t.is_visitor,date:e.startTime||e.endTime})}},openMulSaleList:function(t){var e=this.$refs.searchForm.getFormData(),a=Object(s["a"])(e.date,2),n=a[0],o=a[1];this.$refs.mulSaleList.open().init(Object(l["a"])(Object(l["a"])({},t),{},{startTime:n,endTime:o,type:e.type}))},openOutOfStockList:function(t){var e=this.$refs.searchForm.getFormData();this.$refs.outOfStockList.open(Object(l["a"])({date:e.date},t))},openUnshelvedList:function(t){this.$refs.unshelvedList.open(Object(l["a"])({},t))},openWcSaleList:function(t){if(!(t>1e4)){var e=this.$refs.searchForm.getFormData();this.$refs.wcSaleList.open().init({date:e.date})}},_format:function(t){return function(){var e=parseFloat((100*+t).toFixed(1));return e+"%"}},handleUpdateVisitor:function(){this.handleQuery({})},handleQuery:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function a(){var n,o,i,s,c;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.sort,e.tableData=[],i=e.$refs.searchForm.getFormData(),s=Object(l["a"])(Object(l["a"])({},i),{},{sort:o}),e.openLoading(),a.next=7,Object(S["e"])(Object(l["a"])({},s));case 7:c=a.sent,e.closeLoading(),e.tableData=(null===(n=c.data)||void 0===n?void 0:n.map((function(t){var e;return Object(l["a"])(Object(l["a"])({},t),{},{hasChildren:(null===(e=t.shops)||void 0===e?void 0:e.length)>0})})))||[],e.total=+c.total,e.$notify({type:"success",title:"数据已更新"+Object(m["a"])(new Date,"HH: mm: ss"),offset:0});case 12:case"end":return a.stop()}}),a)})))()},expandAll:function(){var t,e=this;this.expand=!this.expand;var a=null===(t=this.$refs.treeTable)||void 0===t?void 0:t.expandedRows;this.tableData.map((function(t){(e.expand&&-1==a.indexOf(t)||!e.expand&&a.indexOf(t)>-1)&&e.$refs.treeTable.$refs.analysisCenter.load(t,{},(function(){return[]}))}))},expandRow:function(t){var e,a=[t],n=null===(e=this.$refs.treeTable)||void 0===e?void 0:e.expandedRows,o=-1==(null===n||void 0===n?void 0:n.indexOf(t));null===a||void 0===a||a.map((function(t){return t.children=o?t.shops:void 0})),this.$refs.treeTable.expandRows({data:a,expand:o})},handleCellClick:function(t,e,a,n){e.property.indexOf("店铺（群）")>-1&&Object.keys(t).indexOf("shops")>-1&&this.$refs.treeTable.$refs.analysisCenter.load(t,{},(function(){return[]}))},load:function(t,e,a){a(t.shops),this.expandRow(t)},handleExportList:function(t){var e=Object(s["a"])(t.date,2),a=e[0],n=e[1];Object(S["b"])({business_group:t.id,type:t.type,period:t.timeFrame,start_time:a,end_time:n})},handleSortChange:function(t){var e,a=t.prop,n=t.order;if(Object(d["e"])(n))e="";else{var o="descending"===n?"desc":"asc";e=a+"|"+o}this.handleQuery({sort:e})}}},Jt=Ut,Kt=(a("6f70"),Object(w["a"])(Jt,n,o,!1,null,"574352b4",null));e["default"]=Kt.exports},6658:function(t,e,a){"use strict";a("ff04")},"6da7":function(t,e,a){},"6f70":function(t,e,a){"use strict";a("7914")},"74a2":function(t,e,a){},7914:function(t,e,a){},8684:function(t,e,a){"use strict";a("5817")},"94b0":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"g",(function(){return s})),a.d(e,"h",(function(){return l})),a.d(e,"f",(function(){return c})),a.d(e,"j",(function(){return p})),a.d(e,"n",(function(){return u})),a.d(e,"l",(function(){return d})),a.d(e,"c",(function(){return m})),a.d(e,"k",(function(){return f})),a.d(e,"m",(function(){return h})),a.d(e,"i",(function(){return _})),a.d(e,"d",(function(){return b}));a("4e82"),a("99af");var n=a("c1fb"),o=a("da71"),r=function(t){var e=t.business_group,a=t.shop_ids,r=t.type,i=t.timeFrame,s=t.startTime,l=t.endTime,c=t.comparison_start,p=t.comparison_end,u=t.sort,d={business_group:e,shop_ids:a,type:r,period:i,start_time:s,end_time:l,comparison_start:c,comparison_end:p,sort:u};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/lists"),{params:d})},i=function(t){var e=o["a"].api("Dashboard/OperationsCenterStat/export")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},s=function(t){var e=t.type,a=t.shop_id,r=t.start_time,i=t.end_time,s=t.start,l=t.limit,c=t.sort,p={type:e,shop_id:a,start_time:r,end_time:i,start:s,limit:l,sort:c};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getListByShop"),{params:p})},l=function(t){var e=t.start_time,a=t.end_time,r={start_time:e,end_time:a};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getListByWarehouseNew"),{params:r})},c=function(t){var e=t.shop_id,a=t.shop_name,r={shop_id:e,shop_name:a};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getAuthBrands"),{params:r})},p=function(t){var e=t.dimension,a=t.group_id,r=t.shop_id,i=t.start_time,s=t.end_time,l=t.limit,c={dimension:e,group_id:a,shop_id:r,start_time:i,end_time:s,limit:l};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getReport"),{params:c})},u=function(t){var e=t.id,a=t.date,r=t.visitor,i=t.is_visitor,s={shop_id:e,order_date:a,visitors_num:r,is_visitor:i};return n["a"].post(o["a"].api("Dashboard/OperationsCenterStat/setVisitorsNum"),s)},d=function(t){var e=t.shop_id,a=t.start_time,r=t.end_time,i={shop_id:e,start_time:a,end_time:r};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getShopOutStock"),{params:i})},m=function(t){var e=o["a"].api("Dashboard/OperationsCenterStat/exportDate")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},f=function(t){var e=t.sort,a={sort:e};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getShopBrand"),{params:a})},h=function(t){var e=t.shop_id,a=t.brand,r={shop_id:e,brand:a};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getTotalNoShelfGoods?"),{params:r})},_=function(t){var e=t.shop_id,a=t.brand,r={shop_id:e,brand:a};return n["a"].get(o["a"].api("Dashboard/OperationsCenterStat/getNoShelfGoodsDetail?"),{params:r})},b=function(t){var e=o["a"].api("Dashboard/OperationsCenterStat/exportNoShelfGoods")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)}},"978d":function(t,e,a){},af68:function(t,e,a){},ba81:function(t,e,a){"use strict";a("ece3")},c37c:function(t,e,a){},cd05:function(t,e,a){"use strict";a.d(e,"l",(function(){return r})),a.d(e,"f",(function(){return i})),a.d(e,"i",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"m",(function(){return c})),a.d(e,"k",(function(){return p})),a.d(e,"j",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"b",(function(){return m})),a.d(e,"d",(function(){return f})),a.d(e,"a",(function(){return h})),a.d(e,"h",(function(){return _})),a.d(e,"e",(function(){return b}));a("4e82"),a("99af");var n=a("c1fb"),o=a("da71"),r=function(){return n["a"].get(o["a"].api("Dashboard/ShopFinance/getShopOptions"),{})},i=function(){return n["a"].get(o["a"].api("Dashboard/ShopFinance/getMaintainerOptions"),{})},s=function(t){var e=t.shopId,a=t.timeFrame,r=t.dateTime,i={shopId:e,timeFrame:a,dateTime:r};return n["a"].get(o["a"].api("Dashboard/ShopFinance/getShopFinanceDetail"),{params:i})},l=function(){return n["a"].get(o["a"].api("Dashboard/ShopFinance/getPaperWorkList"))},c=function(t){var e=t.shopId,a=t.limit,r=t.timeFrame,i={shopId:e,limit:a,timeFrame:r};return n["a"].get(o["a"].api("Dashboard/ShopFinance/getShopProfitList"),{params:i})},p=function(t){var e=t.shopId,a=t.timeFrame,r=t.sort,i=t.startDate,s=t.endDate,l=t.isSplit,c=t.maintainers,p=t.page,u=t.pageSize,d={shopId:e,timeFrame:a,sort:r,startDate:i,endDate:s,isSplit:l,maintainers:c,page:p,pageSize:u};return n["a"].get(o["a"].api("Dashboard/ShopFinance/getShopFinanceReportList"),{params:d})},u=function(t){var e=t.id,a=t.timeFrame,r={id:e,timeFrame:a};return n["a"].get(o["a"].api("Dashboard/ShopFinance/getShopFinanceDetailByid"),{params:r})},d=function(t){var e=o["a"].api("Dashboard/ShopFinance/exportShopFinance")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},m=function(t){var e=o["a"].api("Dashboard/ShopFinance/exportShopFinanceDetail")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},f=function(t){var e=t.type,a=t.id,r=t.timeFrame,i=t.startDate,s=t.endDate,l=t.sort,c={type:e,id:a,timeFrame:r,startDate:i,endDate:s,sort:l};return n["a"].get(o["a"].api("Dashboard/ShopFinance/getDivFinanceReportList"),{params:c})},h=function(t){var e=o["a"].api("Dashboard/ShopFinance/exportDivFinance")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},_=function(t){var e=t.shopId,a=t.timeFrame,r=t.dateTime,i=t.saleAmount,s=t.postSum,l={shopId:e,timeFrame:a,dateTime:r,saleAmount:i,postSum:s};return n["a"].get(o["a"].api("Dashboard/ShopFinance/getPostFee"),{params:l})},b=function(){var t={};return n["a"].get(o["a"].api("Dashboard/ShopFinance/getDivisionData"),{params:t})}},db4b:function(t,e,a){"use strict";a("1c0d")},ece3:function(t,e,a){},fbfa:function(t,e,a){"use strict";a("af68")},ff04:function(t,e,a){}}]);