(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34427f17"],{"39a4":function(e,t,o){"use strict";o("b19e")},"3ae1":function(e,t,o){"use strict";o("cf54")},"3b6a":function(e,t,o){"use strict";o("caad"),o("2532"),o("ac1f"),o("5319");var n=o("2b0e");n["default"].directive("dialogDrag",{bind:function(e,t,o,n){var l=e.querySelector(".el-dialog__header"),i=e.querySelector(".el-dialog");l.style.cursor="move";var a=i.currentStyle||window.getComputedStyle(i,null);l.onmousedown=function(e){var t,o,n=e.clientX-l.offsetLeft,c=e.clientY-l.offsetTop;a.left.includes("%")?(t=+document.body.clientWidth*(+a.left.replace(/\%/g,"")/100),o=+document.body.clientHeight*(+a.top.replace(/\%/g,"")/100)):(t=+a.left.replace(/\px/g,""),o=+a.top.replace(/\px/g,"")),document.onmousemove=function(e){var l=e.clientX-n,a=e.clientY-c;i.style.left="".concat(l+t,"px"),i.style.top="".concat(a+o,"px")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}}),n["default"].directive("dialogDragWidth",{bind:function(e,t,o,n){var l=t.value.$el.querySelector(".el-dialog");e.onmousedown=function(t){var o=t.clientX-e.offsetLeft;document.onmousemove=function(e){e.preventDefault();var t=e.clientX-o;l.style.width="".concat(t,"px")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}})},"41a8":function(e,t,o){"use strict";o("ec28")},b19e:function(e,t,o){},cf54:function(e,t,o){},dc19:function(e,t,o){"use strict";o("e9c4"),o("c7cd");var n=function(){var e=this,t=this,o=t._self._c;return o("div",{staticClass:"wrapper"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.setColumn,expression:"setColumn"}],staticClass:"header"},[o("div",{staticClass:"tips"},[o("i",{staticClass:"el-icon-info"}),t._v(" "+t._s(t.option.tips))]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.setColumn,expression:"setColumn"}],staticClass:"setting"},[t.option.edit?o("div",[t.option.edit.able?o("el-button",{staticClass:"btn-able",attrs:{size:"small"},on:{click:t.handleClickEditBtn}},[t._v("编辑")]):o("el-button",{staticClass:"btn-disable",attrs:{size:"small",disabled:""}},[t._v("编辑")])],1):t._e(),t.option.unfilterable?t._e():o("div",{staticClass:"setting-icon"},[o("el-popover",{attrs:{placement:"left",trigger:"click","popper-class":"settingPopper"}},[o("el-checkbox-group",{staticClass:"check-container",on:{change:t.handleChangeSelectColumn},model:{value:t.selectCol,callback:function(e){t.selectCol=e},expression:"selectCol"}},t._l(t.col,(function(e){return o("el-checkbox",{key:e.prop,staticClass:"check-item",attrs:{label:e.prop,disabled:e.disabled},model:{value:e.checked,callback:function(o){t.$set(e,"checked",o)},expression:"item.checked"}},[t._v(" "+t._s(e.title)+" ")])})),1),o("div",{staticClass:"select-group"},[o("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.selectAll}},[t._v("全选")]),o("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:t.emptyAll}},[t._v("清空")])],1),o("div",{staticClass:"filter-container",attrs:{slot:"reference"},slot:"reference"},[o("i",{staticClass:"icon el-icon-s-tools"}),t._v(" 筛选 ")])],1)],1)])]),o("el-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:JSON.stringify(t.checkedCol),ref:t.option.ref,class:t.option.backendSummary?"backend-summary table1":"table1",attrs:{"highlight-current-row":"",tableKey:t.option.key,data:t.tableData,"element-loading-text":"数据加载中","element-loading-spinner":"el-icon-loading","tooltip-effect":"light","show-summary":t.option.showSummary,size:"mini",height:"100%","cell-style":t.option.cellStyle,"header-cell-style":t.option.headerCellStyle,"summary-method":function(o){return e.option.summaryMethod(o,t.checkedCol)},"default-sort":t.option.defaultSort,"cell-class-name":function(e){return t.cellClassName(e)},border:"",lazy:""},on:{"row-click":t.handleRowClick}},"el-table",t.$attrs,!1),t.$listeners),[t.option.selectable?o("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._l(t.checkedCol,(function(e,n){return o("el-table-column",{key:e.prop,attrs:{"column-key":e.prop+":"+e.cellClass,index:n,label:e.label,align:e.align,"min-width":e.minWidth,fixed:e.fixed,prop:e.prop,"header-align":e.headerAlign,sortable:!!e.sortable&&("custom"!==e.sortable||"custom"),"show-overflow-tooltip":!e.notShowOverflowTooltip,type:e.type},scopedSlots:t._u([{key:"default",fn:function(n){return[t._t(e.slotName,null,null,n),o("span",{class:e.class},[t._v(" "+t._s(e.process(n.row[e.prop]))+" ")]),o("span",{directives:[{name:"show",rawName:"v-show",value:e.subProp,expression:"item.subProp"}]},[o("el-divider",{attrs:{direction:"vertical"}}),o("span",{class:e.subClass},[t._v(" "+t._s(e.subProcess(n.row[e.subProp]))+" ")])],1),e.trend&&e.trendProcess()?o("span",[n.row[e.trend]?o("span",{class:[n.row[e.trend]>0?"up":"down"]},[o("i",{class:[n.row[e.trend]>=0?"el-icon-top":"el-icon-bottom"]}),t._v(" "+t._s(e.trendProcess(Math.abs(n.row[e.trend])))+" ")]):o("span",[o("el-divider",{attrs:{direction:"vertical"}}),t._v("-")],1)]):t._e()]}}],null,!0)},[o("template",{slot:"header"},[o("el-tooltip",{attrs:{content:e.tooltip,placement:"top",effect:"light"}},[o("template",{slot:"content"},[o("span",{staticStyle:{display:"flex","justify-content":"center"}},[t._v(t._s(e.tooltip))]),e.tooltip2&&e.tooltip3?o("div",{staticStyle:{"margin-top":"5px"}},[o("span",[t._v(t._s(e.tooltip2))]),o("br"),o("span",[t._v(t._s(e.tooltip3))])]):t._e()]),e.openAll?o("span",{staticClass:"cursor-pointer",on:{click:t.openOrCloseAll}},[t._v(" "+t._s(e.title)),e.icon?o("i",{class:e.icon}):t._e()]):o("span",[t._v(" "+t._s(e.title)),e.icon?o("i",{class:e.icon}):t._e()])],2)],1)],2)}))],2)],1)},l=[],i=o("5530"),a=o("2909"),c=(o("d81d"),o("d3b7"),o("159b"),o("a434"),o("14d9"),o("4de4"),o("caad"),o("2532"),o("4e82"),o("fb6a"),o("a15b"),o("aa47")),s=o("ac0d"),r={name:"CTable",mixins:[s["d"],s["a"]],props:{option:Object,columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},setColumn:{type:Boolean,default:!1},loading:Boolean,visible:Boolean},watch:{columns:{handler:function(e){var t=this.getStorageCol(),o=[];o=t?this.dataDiff(e,t):Object(a["a"])(e),this.col=o.map((function(e,t){return Object(i["a"])(Object(i["a"])({},e),{},{index:t})})),this.checkedCol=this.checkedColFun(this.col),this.selectCol=this.checkedCol.map((function(e){return e.prop}))},immediate:!0},data:{handler:function(e){this.tableData=Object(a["a"])(e)},immediate:!0},col:{handler:function(e){this.setStorageCol(e)},deep:!0,immediate:!0},tableData:{handler:function(){var e=this;this.$nextTick((function(){e.$refs[e.option.ref].doLayout()}))},immediate:!0}},data:function(){return{expandedRows:[],tableData:[],col:[],checkedCol:[],selectCol:[],expands:[]}},mounted:function(){var e=this;document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()},this.$nextTick((function(){e.columnDrop()}))},methods:{openOrCloseAll:function(){this.$emit("change-tree")},expandRows:function(e){var t=this,o=e.data,n=e.expand;o.forEach((function(e){var o;t.$refs[t.option.ref].toggleRowExpansion(e,n);var l=t.expandedRows.indexOf(e);l>-1?null===(o=t.expandedRows)||void 0===o||o.splice(l,1):t.expandedRows.push(e)}))},handleRowClick:function(e,t,o){this.$emit("on-clear-row-selection",{ref:this.$refs[this.option.ref]}),this.$refs[this.option.ref].toggleRowSelection(e)},getRowKeys:function(e){return e.id},expandSelect:function(e,t){this.expands=[],t.length>0&&this.expands.push(e.id)},handleClickEditBtn:function(){this.$emit("on-open-edit-form")},handleClickDelBtn:function(){this.$emit("on-open-del-form")},cellClassName:function(e){if(("shopSaleList"!=this.option.ref||0!==e.rowIndex)&&e.column.columnKey)return e.column.columnKey.split(":")[1]?e.column.columnKey.split(":")[1]:void 0},drop:function(){var e=this;this.$nextTick((function(){e.columnDrop(),e.$refs[e.option.ref].doLayout()}))},selectAll:function(){this.selectCol=this.col.map((function(e){return e.prop})),this.col.filter((function(e){return!e.disabled})).forEach((function(e){return e.checked=!0})),this.checkedCol=this.checkedColFun(this.col),this.drop()},emptyAll:function(){this.selectCol=this.col.filter((function(e){return e.disabled})).map((function(e){return e.prop})),this.col.filter((function(e){return!e.disabled})).forEach((function(e){return e.checked=!1})),this.checkedCol=this.checkedColFun(this.col),this.drop()},handleChangeSelectColumn:function(){var e=this;this.col.forEach((function(t){t.checked=e.selectCol.includes(t.prop)})),this.checkedCol=this.checkedColFun(this.col),this.drop()},rowDrop:function(){var e=this,t=document.querySelector(".el-table__body-wrapper tbody");c["a"].create(t,{onEnd:function(t){var o=t.newIndex,n=t.oldIndex,l=[e.tableData[n],e.tableData[o]];e.tableData[o]=l[0],e.tableData[n]=l[1],e.drop(),e.$emit("dropRow",{dropRow:e.tableData[n],targetRow:e.tableData[o],dropRowIndex:n,targetRowIndex:o,data:e.tableData})}})},columnDrop:function(){var e=this;if(this.option.notAllowDrop)return!1;var t=this.$refs[this.option.ref].$el.querySelector(".el-table__header-wrapper tr");c["a"].create(t,{animation:180,delay:0,onEnd:function(t){var o=t.newIndex,n=t.oldIndex,l=e.checkedCol[n],i=e.checkedCol[o],a=[l.index,i.index];e.col[i.index].index=a[0],e.col[l.index].index=a[1],e.col.sort((function(e,t){return e.index-t.index})),e.checkedCol=e.checkedColFun(e.col),e.tableData=e.tableData.slice(0,e.tableData.length),e.drop(),e.$emit("dropCol",{colItem:l,newIndex:o,oldIndex:n,column:e.checkedCol})}})},checkedColFun:function(e){return e.filter((function(e){return e.checked}))},setStorageCol:function(e){this.option.key&&e&&e.length>0&&localStorage.setItem("CTable-"+this.option.key,JSON.stringify(e))},getStorageCol:function(){var e=localStorage.getItem("CTable-"+this.option.key);return e?JSON.parse(e):""},dataDiff:function(e,t){var o=e.length,n=t.length;if(o!=n)return e;var l=e.map((function(e){return e.prop})).sort(),a=t.map((function(e){return e.prop})).sort();if(l.join()!=a.join())return e;for(var c=[],s=0;s<t.length;s++)for(var r=t[s],d=0;d<e.length;d++){var u=e[d];r.prop===u.prop&&c.push(Object(i["a"])(Object(i["a"])({},u),{},{index:r.index,checked:r.checked}))}return c}}},d=r,u=(o("3ae1"),o("41a8"),o("2877")),p=Object(u["a"])(d,n,l,!1,null,null,null);t["a"]=p.exports},ec28:function(e,t,o){},f2bc:function(e,t,o){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],class:["light"!=e.theme?"dark":"light","win"],attrs:{title:e.title,visible:e.visible,top:e.top,width:e.width,modal:!0,"close-on-click-modal":!1,"modal-append-to-body":!0,"close-on-press-escape":!0,"append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[e._t("title"),e._t("content")],2)},l=[],i=(o("3b6a"),{name:"Win",watch:{visible:function(e){e&&(this.theme=localStorage.getItem("theme")),e||(this.$emit("on-live-hand-card-close"),this.$emit("on-goods-center-detail-list-close"))}},props:{title:{type:String,default:"窗口"},top:{type:String,default:"25vh"},width:{type:String,default:"800px"},modal:{type:Boolean,default:!0}},data:function(){return{visible:!1,theme:"dark"}},methods:{open:function(){this.visible=!0},close:function(){this.visible=!1}}}),a=i,c=(o("39a4"),o("2877")),s=Object(c["a"])(a,n,l,!1,null,"3b6ff28c",null);t["a"]=s.exports}}]);