(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bb69a88"],{"15b5":function(t,e,o){},1681:function(t,e,o){"use strict";o("e9c4"),o("c7cd");var a=function(){var t=this,e=this,o=e._self._c;return o("div",{staticClass:"wrapper"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.setColumn,expression:"setColumn"}],staticClass:"header"},[o("div",{staticClass:"tips"},[o("i",{staticClass:"el-icon-info"}),e._v(" "+e._s(e.option.tips))]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.setColumn,expression:"setColumn"}],staticClass:"setting"},[e.option.edit?o("div",[e.option.edit.able?o("el-button",{staticClass:"btn-able",attrs:{size:"small"},on:{click:e.handleClickEditBtn}},[e._v("编辑")]):o("el-button",{staticClass:"btn-disable",attrs:{size:"small",disabled:""}},[e._v("编辑")])],1):e._e(),e.option.unfilterable?e._e():o("div",{staticClass:"setting-icon"},[o("el-popover",{attrs:{placement:"left",trigger:"click","popper-class":"settingPopper"}},[o("el-checkbox-group",{staticClass:"check-container",on:{change:e.handleChangeSelectColumn},model:{value:e.selectCol,callback:function(t){e.selectCol=t},expression:"selectCol"}},e._l(e.col,(function(t){return o("el-checkbox",{key:t.prop,staticClass:"check-item",attrs:{label:t.prop,disabled:t.disabled},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"item.checked"}},[e._v(" "+e._s(t.title)+" ")])})),1),o("div",{staticClass:"select-group"},[o("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.selectAll}},[e._v("全选")]),o("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:e.emptyAll}},[e._v("清空")])],1),o("div",{staticClass:"filter-container",attrs:{slot:"reference"},slot:"reference"},[o("i",{staticClass:"icon el-icon-s-tools"}),e._v(" 筛选 ")])],1)],1)])]),o("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:JSON.stringify(e.checkedCol),ref:e.option.ref,class:e.option.backendSummary?"backend-summary table1":"table1",attrs:{"highlight-current-row":"",tableKey:e.option.key,data:e.tableData,"element-loading-text":"数据加载中","element-loading-spinner":"el-icon-loading","tooltip-effect":"light","show-summary":e.option.showSummary,size:"mini",height:"100%","cell-style":e.option.cellStyle,"header-cell-style":e.option.headerCellStyle,"summary-method":function(o){return t.option.summaryMethod(o,e.checkedCol)},"default-sort":e.option.defaultSort,"cell-class-name":function(t){return e.cellClassName(t)},border:"",lazy:""},on:{"row-click":e.handleRowClick}},"el-table",e.$attrs,!1),e.$listeners),[e.option.selectable?o("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.checkedCol,(function(t,a){return o("el-table-column",{key:t.prop,attrs:{"column-key":t.prop+":"+t.cellClass,index:a,label:t.label,align:t.align,"min-width":t.minWidth,fixed:t.fixed,prop:t.prop,"header-align":t.headerAlign,sortable:!!t.sortable&&("custom"!==t.sortable||"custom"),"show-overflow-tooltip":!t.notShowOverflowTooltip,type:t.type},scopedSlots:e._u([{key:"default",fn:function(a){return[e._t(t.slotName,null,null,a),t.props?o("el-row",e._l(t.props,(function(n,r){return o("el-col",{key:n.prop,attrs:{span:8}},[o("el-col",{staticClass:"ellipsis",staticStyle:{"text-align":"right"},attrs:{span:r!==t.props.length-1?20:24}},[o("el-tooltip",{attrs:{content:"".concat(a.row[n.prop]),effect:"light",placement:"top-start"}},[o("span",{class:n.class&&n.class(a.row[n.prop])},[e._v(" "+e._s(n.process?n.process(a.row[n.prop]):a.row[n.prop])+" ")])])],1),r!==t.props.length-1?o("el-col",{staticClass:"divider",attrs:{span:4}},[e._v("|")]):e._e()],1)})),1):o("span",[e._v(e._s(t.process?t.process(a.row[t.prop]):a.row[t.prop]))])]}}],null,!0)},[o("template",{slot:"header"},[o("el-tooltip",{attrs:{content:t.tooltip,placement:"top",effect:"light"}},[o("template",{slot:"content"},[o("span",{staticStyle:{display:"flex","justify-content":"center"}},[e._v(e._s(t.tooltip))]),t.tooltip2&&t.tooltip3?o("div",{staticStyle:{"margin-top":"5px"}},[o("span",[e._v(e._s(t.tooltip2))]),o("br"),o("span",[e._v(e._s(t.tooltip3))])]):e._e()]),t.openAll?o("span",{staticClass:"cursor-pointer",on:{click:e.openOrCloseAll}},[e._v(" "+e._s(t.title)),t.icon?o("i",{class:t.icon}):e._e()]):o("span",[e._v(" "+e._s(t.title)),t.icon?o("i",{class:t.icon}):e._e()])],2)],1)],2)}))],2)],1)},n=[],r=o("5530"),i=o("2909"),l=(o("d81d"),o("d3b7"),o("159b"),o("a434"),o("14d9"),o("4de4"),o("caad"),o("2532"),o("4e82"),o("fb6a"),o("a15b"),o("aa47")),s=o("ac0d"),c={name:"CTable",mixins:[s["d"],s["a"]],props:{option:Object,columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},setColumn:{type:Boolean,default:!1},loading:Boolean,visible:Boolean},watch:{columns:{handler:function(t){var e=this.getStorageCol(),o=[];o=e?this.dataDiff(t,e):Object(i["a"])(t),this.col=o.map((function(t,e){return Object(r["a"])(Object(r["a"])({},t),{},{index:e})})),this.checkedCol=this.checkedColFun(this.col),this.selectCol=this.checkedCol.map((function(t){return t.prop}))},immediate:!0},data:{handler:function(t){this.tableData=Object(i["a"])(t)},immediate:!0},col:{handler:function(t){this.setStorageCol(t)},deep:!0,immediate:!0},tableData:{handler:function(){var t=this;this.$nextTick((function(){t.$refs[t.option.ref].doLayout()}))},immediate:!0}},data:function(){return{expandedRows:[],tableData:[],col:[],checkedCol:[],selectCol:[],expands:[]}},mounted:function(){var t=this;document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()},this.$nextTick((function(){t.columnDrop()}))},methods:{openOrCloseAll:function(){this.$emit("change-tree")},expandRows:function(t){var e=this,o=t.data,a=t.expand;o.forEach((function(t){var o;e.$refs[e.option.ref].toggleRowExpansion(t,a);var n=e.expandedRows.indexOf(t);n>-1?null===(o=e.expandedRows)||void 0===o||o.splice(n,1):e.expandedRows.push(t)}))},handleRowClick:function(t,e,o){this.$emit("on-clear-row-selection",{ref:this.$refs[this.option.ref]}),this.$refs[this.option.ref].toggleRowSelection(t)},getRowKeys:function(t){return t.id},expandSelect:function(t,e){this.expands=[],e.length>0&&this.expands.push(t.id)},handleClickEditBtn:function(){this.$emit("on-open-edit-form")},handleClickDelBtn:function(){this.$emit("on-open-del-form")},cellClassName:function(t){if(("shopSaleList"!=this.option.ref||0!==t.rowIndex)&&t.column.columnKey)return t.column.columnKey.split(":")[1]?t.column.columnKey.split(":")[1]:void 0},drop:function(){var t=this;this.$nextTick((function(){t.columnDrop(),t.$refs[t.option.ref].doLayout()}))},selectAll:function(){this.selectCol=this.col.map((function(t){return t.prop})),this.col.filter((function(t){return!t.disabled})).forEach((function(t){return t.checked=!0})),this.checkedCol=this.checkedColFun(this.col),this.drop()},emptyAll:function(){this.selectCol=this.col.filter((function(t){return t.disabled})).map((function(t){return t.prop})),this.col.filter((function(t){return!t.disabled})).forEach((function(t){return t.checked=!1})),this.checkedCol=this.checkedColFun(this.col),this.drop()},handleChangeSelectColumn:function(){var t=this;this.col.forEach((function(e){e.checked=t.selectCol.includes(e.prop)})),this.checkedCol=this.checkedColFun(this.col),this.drop()},rowDrop:function(){var t=this,e=document.querySelector(".el-table__body-wrapper tbody");l["a"].create(e,{onEnd:function(e){var o=e.newIndex,a=e.oldIndex,n=[t.tableData[a],t.tableData[o]];t.tableData[o]=n[0],t.tableData[a]=n[1],t.drop(),t.$emit("dropRow",{dropRow:t.tableData[a],targetRow:t.tableData[o],dropRowIndex:a,targetRowIndex:o,data:t.tableData})}})},columnDrop:function(){var t=this;if(this.option.notAllowDrop)return!1;var e=this.$refs[this.option.ref].$el.querySelector(".el-table__header-wrapper tr");l["a"].create(e,{animation:180,delay:0,onEnd:function(e){var o=e.newIndex,a=e.oldIndex,n=t.checkedCol[a],r=t.checkedCol[o],i=[n.index,r.index];t.col[r.index].index=i[0],t.col[n.index].index=i[1],t.col.sort((function(t,e){return t.index-e.index})),t.checkedCol=t.checkedColFun(t.col),t.tableData=t.tableData.slice(0,t.tableData.length),t.drop(),t.$emit("dropCol",{colItem:n,newIndex:o,oldIndex:a,column:t.checkedCol})}})},checkedColFun:function(t){return t.filter((function(t){return t.checked}))},setStorageCol:function(t){this.option.key&&t&&t.length>0&&localStorage.setItem("CTable-"+this.option.key,JSON.stringify(t))},getStorageCol:function(){var t=localStorage.getItem("CTable-"+this.option.key);return t?JSON.parse(t):""},dataDiff:function(t,e){var o=t.length,a=e.length;if(o!=a)return t;var n=t.map((function(t){return t.prop})).sort(),i=e.map((function(t){return t.prop})).sort();if(n.join()!=i.join())return t;for(var l=[],s=0;s<e.length;s++)for(var c=e[s],p=0;p<t.length;p++){var d=t[p];c.prop===d.prop&&l.push(Object(r["a"])(Object(r["a"])({},d),{},{index:c.index,checked:c.checked}))}return l}}},p=c,d=(o("e361"),o("4fd6"),o("2877")),u=Object(d["a"])(p,a,n,!1,null,null,null);e["a"]=u.exports},"41d5":function(t,e,o){"use strict";o("f42d")},"4fd6":function(t,e,o){"use strict";o("6afb")},"6afb":function(t,e,o){},"7de2":function(t,e,o){"use strict";o("ea56")},"9f9a":function(t,e,o){"use strict";o("d957")},a5f4:function(t,e,o){"use strict";o("15b5")},cb32:function(t,e,o){"use strict";o.r(e);var a,n=function(){var t=this,e=t._self._c,o=t._self._setupProxy;return e("div",{ref:"board",staticClass:"anylysis-center"},[e("div",{staticClass:"search-container"},[e(o.SearchForm,{ref:"searchForm",on:{"on-search":o.getData,"on-export":o.exportData,"on-open-data-compare":o.openDataCompare}})],1),e("div",{staticClass:"table-container"},[e(o.Table,{ref:"treeTable",attrs:{lazy:!0,load:o.load,loading:o.data.loading,columns:o.data.listCols,data:o.data.tableData,setColumn:!0,option:o.data.tableOption,"row-key":"index","tree-props":{hasChildren:"hasChildren"}},on:{"sort-change":o.handleSortChange,"cell-click":o.handleCellClick}})],1),e(o.DataCompare,{ref:"dataCompare"})],1)},r=[],i=o("c7eb"),l=o("1da1"),s=o("5530"),c=(o("d81d"),o("b64b"),o("4e82"),o("edee")),p=o("2b0e"),d=(o("b680"),o("fa7d")),u={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:100,align:"right",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",trend:"",icon:"el-icon-question",disabled:!1},f=[{prop:"title",title:"店铺（群）",align:"left",minWidth:180,disabled:!0,cellClass:"pointer-cursor",icon:"",fixed:!0},{prop:"sale_amount",title:"GMV销售额",tooltip:"根据下单时间，非大促：统计所有状态订单金额，大促：统计（待反馈已导出、反馈成功、待退货、已退货）订单金额，默认截止当前时间的同环比数据",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,sortable:"custom",disabled:!0,align:"center",props:[{prop:"sale_amount",process:function(t){return isNaN(t)?t:(+t).toFixed()}},{prop:"sale_amount_org",process:function(t){return isNaN(t)?t:(+t).toFixed()}},{prop:"sale_amount_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]},{prop:"estimate_sale_amount",title:"预估GMV销售额",tooltip:"默认截止当前时间的预估GMV销售额与实际同环比数据对比",tooltip2:"本期预估 | 上月同期 | 环比",tooltip3:"本期预估 | 去年同期 | 同比",minWidth:220,sortable:"custom",disabled:!0,align:"center",props:[{prop:"estimate_amount",process:function(t){return isNaN(t)?t:(+t).toFixed()}},{prop:"estimate_amount_org",process:function(t){return isNaN(t)?t:(+t).toFixed()}},{prop:"estimate_amount_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]},{prop:"visitors_num",title:"访客数",tooltip:"店铺访客数量",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,disabled:!0,align:"center",props:[{prop:"visitors_num",process:function(t){return isNaN(t)?t:(+t).toFixed()}},{prop:"visitors_num_org",process:function(t){return isNaN(t)?t:(+t).toFixed()}},{prop:"visitors_num_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]},{prop:"conversion_rate",title:"转化率",tooltip:"成交客户数/访客数",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,disabled:!0,align:"center",props:[{prop:"conversion_rate",process:function(t){return isNaN(t)?t:Object(d["h"])(100*+t)+"%"}},{prop:"conversion_rate_org",process:function(t){return isNaN(t)?t:Object(d["h"])(100*+t)+"%"}},{prop:"conversion_rate_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]},{prop:"customer_unit_price",title:"客单价",tooltip:"销售额/成交客数",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,disabled:!0,align:"center",props:[{prop:"customer_unit_price",process:function(t){return isNaN(t)?t:(+t).toFixed(2)}},{prop:"customer_unit_price_org",process:function(t){return isNaN(t)?t:(+t).toFixed(2)}},{prop:"customer_unit_price_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]},{prop:"price_order",title:"件单价",tooltip:"销售额/成交件数",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,disabled:!0,align:"center",props:[{prop:"price_order",process:function(t){return isNaN(t)?t:(+t).toFixed(2)}},{prop:"price_order_org",process:function(t){return isNaN(t)?t:(+t).toFixed(2)}},{prop:"price_order_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]},{prop:"order_nums",title:"订单量",tooltip:"订单数量",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,disabled:!0,align:"center",props:[{prop:"order_nums"},{prop:"order_nums_org"},{prop:"order_nums_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]},{prop:"average_discount",title:"折扣",tooltip:"总销售额/总牌价",tooltip2:"本期 | 上月同期 | 环比",tooltip3:"本期 | 去年同期 | 同比",minWidth:220,disabled:!0,align:"center",props:[{prop:"average_discount"},{prop:"average_discount_org"},{prop:"average_discount_scale",process:function(t){return Object(d["h"])(100*+t)+"%"},class:function(t){return+t>=0?"up":"down"}}]}],m=function(){var t=this,e=t._self._c,o=t._self._setupProxy;return e("div",[e("div",{staticClass:"search-form"},[e("el-form",{ref:"form",attrs:{model:o.data.form,size:"small",inline:""}},[e("el-form-item",{attrs:{label:"平台事业群："}},[e("el-select",{attrs:{clearable:"",multiple:"",filterable:"","collapse-tags":"",placeholder:"请选择店铺，可搜索，可多选"},on:{change:o.handleOptionChange},model:{value:o.data.form.groups,callback:function(e){t.$set(o.data.form,"groups",e)},expression:"data.form.groups"}},t._l(o.data.groupOptions,(function(o){return e("el-option-group",{key:o.label,attrs:{label:o.label}},t._l(o.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1),e("el-button-group",[e("el-button",{attrs:{type:"warning"},on:{click:o.onClearGroupSelect}},[t._v("清空")]),e("el-button",{attrs:{type:"primary"},on:{click:o.onSelectAllGroup}},[t._v("全选")])],1)],1),e("el-form-item",[e("el-button-group",{staticClass:"group group-3"},[e("el-button",{attrs:{type:2===o.data.form.type?"primary":""},on:{click:function(t){return o.handleClickBtn({type:2})}}},[t._v("环比")]),e("el-button",{attrs:{type:1===o.data.form.type?"primary":""},on:{click:function(t){return o.handleClickBtn({type:1})}}},[t._v("同比")])],1)],1),e("br"),e("el-form-item",{attrs:{label:"当前时间："}},[e("el-date-picker",{staticStyle:{width:"270px"},attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":o.data.shortcuts},model:{value:o.data.form.date,callback:function(e){t.$set(o.data.form,"date",e)},expression:"data.form.date"}})],1),e("el-form-item",{attrs:{label:"VS"}}),e("el-form-item",{attrs:{label:"对比时间："}},[e("el-date-picker",{staticStyle:{width:"270px"},attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":o.data.pickerOptions},on:{change:o.handleChangeDate},model:{value:o.data.form.time,callback:function(e){t.$set(o.data.form,"time",e)},expression:"data.form.time"}})],1),e("el-form-item",[e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:o.onSearch}},[t._v("查询")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:o.onExport}},[t._v("导出")])],1)],1),e("el-form-item",[e("el-tooltip",{attrs:{effect:"light",content:"已发货GMV比对（待反馈已导出、反馈成功、待退货、已退货）",placement:"bottom"}},[e("el-checkbox",{staticClass:"text-gold",model:{value:o.data.form.isLarge,callback:function(e){t.$set(o.data.form,"isLarge",e)},expression:"data.form.isLarge"}},[t._v(" 大促GMV比对 ")])],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"warning",icon:""},on:{click:o.openDataCompare}},[t._v("分时数据比对")])],1)],1)],1)])},h=[],b=o("3835"),g=(o("b0c0"),o("fb6a"),o("a15b"),o("d3b7"),o("159b"),o("14d9"),o("a434"),o("ed08")),v=o("d0f1"),_={__name:"search-form",setup:function(t,e){var o=e.expose,a=e.emit,n=Object(p["reactive"])({groupOptions:[],shortcuts:v["a"],pickerOptions:{shortcuts:v["a"],disabledDate:function(t){return t.getTime()>Date.now()-864e5}},form:{groups:[],date:[],time:[],type:1,isLarge:0}});Object(p["onMounted"])((function(){w(),u(),Object(p["nextTick"])((function(){y()}))})),Object(p["watch"])((function(){return n.form.date}),(function(){_()}));var r=function(){n.form.type=3},u=function(){var t=Object(l["a"])(Object(i["a"])().mark((function t(){var e,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])();case 2:o=t.sent,n.groupOptions=null===(e=o.data)||void 0===e?void 0:e.map((function(t){var e;return{label:t.name,value:t.id,options:null===(e=t.child)||void 0===e?void 0:e.map((function(t){return{label:t.name,value:t.id}}))}}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t,e=Object.assign({},Object(s["a"])({},n.form));return e.date?["startDate","endDate"].map((function(t,o){e[t]="month"===e.timeFrame?e["date"][o].slice(0,7):e["date"][o]})):(e["startDate"]="",e["endDate"]=""),e["businessGroup"]=null===(t=n.form.groups)||void 0===t?void 0:t.join(","),e["isLarge"]=parseInt(+n.form.isLarge),e["dataType"]=n.form.type,3==n.form.type&&(e["comparison_start"]=n.form.time[0],e["comparison_end"]=n.form.time[1]),e},m=function(){a("on-open-data-compare",{})},h=function(t){var e=t.type;n.form.type=e,_()},_=function(){var t=Object(b["a"])(n.form.date,2),e=t[0],o=t[1],a=new Date(o)-new Date(e),r=new Date(Object(d["g"])(o));2==n.form.type&&(r=new Date(o),r.setDate(0));var i=r.getDate(),l=new Date(o).getDate(),s=new Date(o),c=new Date(e);if(l>=i)s=new Date(r),c=new Date(s-a);else{var p=86400*(i-l)*1e3;s=new Date(r-p),c=new Date(s-a)}c=Object(g["a"])(c,"yyyy-MM-dd"),s=Object(g["a"])(s,"yyyy-MM-dd"),n.form.time=[c,s]},y=function(){a("on-search",f())},C=function(){a("on-export",f())},x=function(){n.form.shops=[]},k=function(){var t=[];n.groupOptions.forEach((function(e){t.push(e.value)})),n.form.shops=t},w=function(){n.form.timeFrame="day";var t=Object(g["a"])(new Date,"yyyy-MM-dd");n.form.date=[t,t]},O=function(t){1!==t.length&&(-2===t[0]?n.form.shops=[-2]:-2===t[t.length-1]&&n.form.shops.splice(t.indexOf(-2),1))};return o({_getFormData:f}),{__sfc:!0,emit:a,data:n,handleChangeDate:r,getData:u,_getFormData:f,openDataCompare:m,handleClickBtn:h,switchTime:_,onSearch:y,onExport:C,onClearGroupSelect:x,onSelectAllGroup:k,setDefaultDate:w,handleOptionChange:O,shortcuts:v["a"]}}},y=_,C=(o("a5f4"),o("2877")),x=Object(C["a"])(y,m,h,!1,null,"79c404e8",null),k=x.exports,w=o("1681"),O=function(){var t=this,e=t._self._c,o=t._self._setupProxy;return e(o.Win,{ref:"win",attrs:{title:o.data.title,top:"10vh"}},[e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("el-form",{ref:"form",attrs:{model:o.data.form,size:"small",inline:""}},[e("el-form-item",{attrs:{label:"当前时间："}},[e("el-date-picker",{staticStyle:{width:"280px"},attrs:{type:"datetimerange","range-separator":"-",format:"yyyy-MM-dd HH点","value-format":"yyyy-MM-dd HH:00:00","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":o.data.pickerOptions,"popper-class":"picker"},model:{value:o.data.form.date,callback:function(e){t.$set(o.data.form,"date",e)},expression:"data.form.date"}})],1),e("el-form-item",{attrs:{label:"对比时间："}},[e("el-date-picker",{staticStyle:{width:"280px"},attrs:{type:"datetimerange","range-separator":"-",format:"yyyy-MM-dd HH点","value-format":"yyyy-MM-dd HH:00:00","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":o.data.pickerOptions,"popper-class":"picker"},model:{value:o.data.form.time,callback:function(e){t.$set(o.data.form,"time",e)},expression:"data.form.time"}})],1),e("el-form-item",[e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:o.onSearch}},[t._v("查询")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:o.onExport}},[t._v("导出")])],1)],1),e("el-form-item",[e("el-tooltip",{attrs:{effect:"light",content:"勾选后将根据对比小时预估，用于大促开始时间不一致等场景（默认根据同比小时预估）",placement:"bottom"}},[e("el-checkbox",{staticClass:"text-gold",model:{value:o.data.form.isUseComparison,callback:function(e){t.$set(o.data.form,"isUseComparison",e)},expression:"data.form.isUseComparison"}},[t._v(" 对比时间预估 ")])],1)],1)],1),e("div",{staticClass:"table-container"},[e(o.CTable,{attrs:{loading:o.data.loading,columns:o.data.listCols,data:o.data.tableData,setColumn:!1,option:o.data.tableOption},scopedSlots:t._u([{key:"pic",fn:function(t){return[e("el-image",{staticClass:"img-card",attrs:{src:t.row.pic_url,"preview-src-list":[t.row.pic_url]}})]}},{key:"date",fn:function(e){return[t._v(" "+t._s(e.row.start_date)+" ~ "+t._s(e.row.end_date)+" ")]}},{key:"status",fn:function(a){return[t._v(" "+t._s(o.statusJSON[a.row.status])+" "),e("el-tooltip",{attrs:{content:a.row.status,placement:"top",effect:"light"}},[e("span",{staticClass:"cursor-pointer"},[1==a.row.status?e("i",{staticClass:"el-icon-question text-gold"}):t._e()])])]}}])})],1)],1)])},D=[],j=o("f2bc"),S=o("dc19"),N=o("ade3"),T=(a={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:100,align:"center",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",trend:"",cellClass:"",icon:"el-icon-question",process:function(t){return isNaN(t)?t:Object(d["h"])(t)}},Object(N["a"])(a,"process",(function(t){return isNaN(t)?t:(+t).toFixed()})),Object(N["a"])(a,"subProcess",(function(t){return(isNaN(t)?t+"%":Object(d["h"])(120*t))+"%"})),Object(N["a"])(a,"trendProcess",(function(t){return(isNaN(t)?t+"%":Object(d["h"])(120*t))+"%"})),Object(N["a"])(a,"disabled",!1),a),M=[{prop:"index",title:"序号",align:"center",class:"text-green",icon:"",process:function(t){return(+t).toFixed()}},{prop:"show_time",title:"当前时间",tooltip:"当前时间小时维度",class:"text-orange bold"},{prop:"show_time_org",title:"对比时间",tooltip:"对比时间小时维度",class:"text-orange bold"},{prop:"sale_amount",title:"当前小时",tooltip:"当前时间GMV销售额",cellClass:"bg-green",class:"text-black bold"},{prop:"sale_amount_org",title:"对比小时",tooltip:"对比时间GMV销售额",cellClass:"bg-green",class:"text-black bold"},{prop:"sale_amount_sca",title:"小时同比",tooltip:"（当前小时-对比小时）/ 对比小时 * 100%",process:function(t){return isNaN(+t)?t:Object(d["h"])(100*t)+"%"},cellClass:"bg-green",class:"text-black bold"},{prop:"add_amount",title:"累计当前小时",tooltip:"当前小时GMV销售额累计",cellClass:"bg-cyan",minWidth:120,class:"text-black bold"},{prop:"add_amount_org",title:"累计对比小时",tooltip:"对比小时GMV销售额累计",cellClass:"bg-cyan",minWidth:120,class:"text-black bold"},{prop:"add_amount_sca",title:"累计小时同比",tooltip:"（累计当前小时-累计对比小时）/ 对比小时 * 100%",cellClass:"bg-cyan",process:function(t){return isNaN(+t)?t:Object(d["h"])(100*t)+"%"},minWidth:120,class:"text-black bold"},{prop:"estimate_amount",title:"预估当前小时",tooltip:"当前小时的预估GMV销售额，根据当前小时预估，全天销售",cellClass:"bg-orange",minWidth:120,class:"text-black bold"},{prop:"estimate_amount_org",title:"对比小时",tooltip:"对比小时GMV销售额",cellClass:"bg-orange",minWidth:120,class:"text-black bold"},{prop:"estimate_amount_sca",title:"预估小时同比",tooltip:"（预估当前小时-对比小时）/ 对比小时 * 100%",cellClass:"bg-orange",process:function(t){return isNaN(+t)?t:Object(d["h"])(100*t)+"%"},minWidth:120,class:"text-black bold"}],F=(o("3b6a"),{__name:"data-compare",emits:null,setup:function(t,e){var o=e.expose,a=e.emit,n=M.map((function(t){return Object(s["a"])(Object(s["a"])({},T),t)})),r={0:"待审核",1:"已通过",2:"未通过"},d=Object(p["ref"])(null),u=Object(p["reactive"])({id:"",visible:!1,title:"",loading:!1,form:{date:[],time:[],isUseComparison:0},tableData:[],listCols:n,tableOption:{ref:"dataCompare",key:"dataCompare",backendSummary:!0},total:0,expand:!1}),f=function(){u.tableData=[],u.form.isUseComparison=0,d.value.open(),u.title="GMV销售额分时数据比对",h(),Object(p["nextTick"])((function(){_()}))},m=function(t){d.value.close()},h=function(){var t=Object(g["a"])(new Date,"yyyy-MM-dd HH:00:00");u.form.date=[t,t],u.form.time=[t,t]},b=function(){_()},v=function(){var t={startTime:u.form.date[0],endTime:u.form.date[1],comparisonStartTime:u.form.time[0],comparisonEndTime:u.form.time[1],isUseComparison:u.form.isUseComparison?1:0};Object(c["a"])(t)},_=function(){var t=Object(l["a"])(Object(i["a"])().mark((function t(){var e,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return u.loading=!0,e={startTime:u.form.date[0],endTime:u.form.date[1],comparisonStartTime:u.form.time[0],comparisonEndTime:u.form.time[1],isUseComparison:u.form.isUseComparison?1:0},t.next=4,Object(c["d"])(e);case 4:o=t.sent,u.tableData=(null===o||void 0===o?void 0:o.data)||[],u.loading=!1;case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(t){var e,o=t.prop,a=t.order;if(a){var n="descending"===a?"desc":"asc";e=o+"|"+n}else e="";u.sort=e,_()};return o({open:f}),{__sfc:!0,cols:n,statusJSON:r,emit:a,win:d,data:u,open:f,close:m,setDefaultDate:h,onSearch:b,onExport:v,getData:_,handleSortChange:y,Win:j["a"],CTable:S["a"],listCols:M}}}),$=F,G=(o("41d5"),o("7de2"),Object(C["a"])($,O,D,!1,null,"e53dfb22",null)),W=G.exports,E={__name:"index",setup:function(t){var e=f.map((function(t){return Object(s["a"])(Object(s["a"])({},u),t)})),o=Object(p["ref"])(null),a=Object(p["ref"])(null),n=Object(p["ref"])(null),r=Object(p["reactive"])({dataType:1,loading:!1,tableData:[],listCols:e,tableOption:{ref:"gmv",key:"gmv",backendSummary:!0,defaultSort:{prop:"sale_amount",order:"descending"},tips:"点击【事业群】展开店铺列表"},total:0,expand:!1,sort:"sale_amount|desc"});Object(p["watch"])((function(){return r.dataType}),(function(){v()}));var m=function(t,e,o,a){e.property.indexOf("title")>-1&&Object.keys(t).indexOf("hasChildren")>-1&&n.value.$refs.gmv.load(t,{},(function(){return[]}))},h=function(t,e,o){o(t.child_list),b(t)},b=function(t){var e,o=[t],a=null===(e=n.value)||void 0===e?void 0:e.expandedRows,r=-1==(null===a||void 0===a?void 0:a.indexOf(t));null===o||void 0===o||o.map((function(t){return t.children=r?t.child_list:void 0})),n.value.expandRows({data:o,expand:r})},g=function(){a.value.open()},v=function(){var t=Object(l["a"])(Object(i["a"])().mark((function t(){var e,a,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.tableData=[],r.loading=!0,a=o.value._getFormData(),t.next=5,Object(c["e"])(Object(s["a"])(Object(s["a"])({},a),{},{sort:r.sort}));case 5:n=t.sent,r.tableData=null===(e=n.data)||void 0===e?void 0:e.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{hasChildren:0!=t.index})})),r.loading=!1;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(t){var e,o=t.prop,a=t.order;if(Object(d["e"])(a))e="";else{var n="descending"===a?"desc":"asc";e=o+"|"+n}r.sort=e,v()},y=function(t){Object(c["b"])(Object(s["a"])({},t))};return{__sfc:!0,cols:e,searchForm:o,dataCompare:a,treeTable:n,data:r,handleCellClick:m,load:h,expandRow:b,openDataCompare:g,getData:v,handleSortChange:_,exportData:y,listCols:f,SearchForm:k,Table:w["a"],DataCompare:W}}},R=E,A=(o("9f9a"),Object(C["a"])(R,n,r,!1,null,"0c958d0c",null));e["default"]=A.exports},d957:function(t,e,o){},e361:function(t,e,o){"use strict";o("e7c0")},e7c0:function(t,e,o){},ea56:function(t,e,o){},edee:function(t,e,o){"use strict";o.d(e,"c",(function(){return r})),o.d(e,"e",(function(){return i})),o.d(e,"b",(function(){return l})),o.d(e,"d",(function(){return s})),o.d(e,"a",(function(){return c}));o("4e82"),o("99af");var a=o("c1fb"),n=o("da71"),r=function(){return a["a"].get(n["a"].api("Dashboard/GmvFinance/getDivisionData"))},i=function(t){var e=t.businessGroup,o=t.dataType,r=t.isLarge,i=t.startDate,l=t.endDate,s=t.comparison_start,c=t.comparison_end,p=t.sort,d={businessGroup:e,dataType:o,isLarge:r,startDate:i,endDate:l,comparisonStartDate:s,comparisonEndDate:c,sort:p};return a["a"].get(n["a"].api("Dashboard/GmvFinance/getList"),{params:d})},l=function(t){var e=n["a"].api("Dashboard/GmvFinance/exportFinance")+"?";for(var o in t)e+="".concat(o,"=").concat(t[o],"&");window.open(e)},s=function(t){var e=t.startTime,o=t.endTime,r=t.comparisonStartTime,i=t.comparisonEndTime,l=t.isUseComparison,s={startTime:e,endTime:o,comparisonStartTime:r,comparisonEndTime:i,isUseComparison:l};return a["a"].get(n["a"].api("Dashboard/GmvFinance/getHourList"),{params:s})},c=function(t){var e=n["a"].api("Dashboard/GmvFinance/exportHourList")+"?";for(var o in t)e+="".concat(o,"=").concat(t[o],"&");window.open(e)}},f42d:function(t,e,o){}}]);