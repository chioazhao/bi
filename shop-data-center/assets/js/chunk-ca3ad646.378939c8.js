(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca3ad646"],{"052d":function(e,t,a){},1681:function(e,t,a){"use strict";a("e9c4"),a("c7cd");var n=function(){var e=this,t=this,a=t._self._c;return a("div",{staticClass:"wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.setColumn,expression:"setColumn"}],staticClass:"header"},[a("div",{staticClass:"tips"},[a("i",{staticClass:"el-icon-info"}),t._v(" "+t._s(t.option.tips))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.setColumn,expression:"setColumn"}],staticClass:"setting"},[t.option.edit?a("div",[t.option.edit.able?a("el-button",{staticClass:"btn-able",attrs:{size:"small"},on:{click:t.handleClickEditBtn}},[t._v("编辑")]):a("el-button",{staticClass:"btn-disable",attrs:{size:"small",disabled:""}},[t._v("编辑")])],1):t._e(),t.option.unfilterable?t._e():a("div",{staticClass:"setting-icon"},[a("el-popover",{attrs:{placement:"left",trigger:"click","popper-class":"settingPopper"}},[a("el-checkbox-group",{staticClass:"check-container",on:{change:t.handleChangeSelectColumn},model:{value:t.selectCol,callback:function(e){t.selectCol=e},expression:"selectCol"}},t._l(t.col,(function(e){return a("el-checkbox",{key:e.prop,staticClass:"check-item",attrs:{label:e.prop,disabled:e.disabled},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}},[t._v(" "+t._s(e.title)+" ")])})),1),a("div",{staticClass:"select-group"},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.selectAll}},[t._v("全选")]),a("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:t.emptyAll}},[t._v("清空")])],1),a("div",{staticClass:"filter-container",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"icon el-icon-s-tools"}),t._v(" 筛选 ")])],1)],1)])]),a("el-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:JSON.stringify(t.checkedCol),ref:t.option.ref,class:t.option.backendSummary?"backend-summary table1":"table1",attrs:{"highlight-current-row":"",tableKey:t.option.key,data:t.tableData,"element-loading-text":"数据加载中","element-loading-spinner":"el-icon-loading","tooltip-effect":"light","show-summary":t.option.showSummary,size:"mini",height:"100%","cell-style":t.option.cellStyle,"header-cell-style":t.option.headerCellStyle,"summary-method":function(a){return e.option.summaryMethod(a,t.checkedCol)},"default-sort":t.option.defaultSort,"cell-class-name":function(e){return t.cellClassName(e)},border:"",lazy:""},on:{"row-click":t.handleRowClick}},"el-table",t.$attrs,!1),t.$listeners),[t.option.selectable?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._l(t.checkedCol,(function(e,n){return a("el-table-column",{key:e.prop,attrs:{"column-key":e.prop+":"+e.cellClass,index:n,label:e.label,align:e.align,"min-width":e.minWidth,fixed:e.fixed,prop:e.prop,"header-align":e.headerAlign,sortable:!!e.sortable&&("custom"!==e.sortable||"custom"),"show-overflow-tooltip":!e.notShowOverflowTooltip,type:e.type},scopedSlots:t._u([{key:"default",fn:function(n){return[t._t(e.slotName,null,null,n),e.props?a("el-row",t._l(e.props,(function(o,i){return a("el-col",{key:o.prop,attrs:{span:8}},[a("el-col",{staticClass:"ellipsis",staticStyle:{"text-align":"right"},attrs:{span:i!==e.props.length-1?20:24}},[a("el-tooltip",{attrs:{content:"".concat(n.row[o.prop]),effect:"light",placement:"top-start"}},[a("span",{class:o.class&&o.class(n.row[o.prop])},[t._v(" "+t._s(o.process?o.process(n.row[o.prop]):n.row[o.prop])+" ")])])],1),i!==e.props.length-1?a("el-col",{staticClass:"divider",attrs:{span:4}},[t._v("|")]):t._e()],1)})),1):a("span",[t._v(t._s(e.process?e.process(n.row[e.prop]):n.row[e.prop]))])]}}],null,!0)},[a("template",{slot:"header"},[a("el-tooltip",{attrs:{content:e.tooltip,placement:"top",effect:"light"}},[a("template",{slot:"content"},[a("span",{staticStyle:{display:"flex","justify-content":"center"}},[t._v(t._s(e.tooltip))]),e.tooltip2&&e.tooltip3?a("div",{staticStyle:{"margin-top":"5px"}},[a("span",[t._v(t._s(e.tooltip2))]),a("br"),a("span",[t._v(t._s(e.tooltip3))])]):t._e()]),e.openAll?a("span",{staticClass:"cursor-pointer",on:{click:t.openOrCloseAll}},[t._v(" "+t._s(e.title)),e.icon?a("i",{class:e.icon}):t._e()]):a("span",[t._v(" "+t._s(e.title)),e.icon?a("i",{class:e.icon}):t._e()])],2)],1)],2)}))],2)],1)},o=[],i=a("5530"),r=a("2909"),l=(a("d81d"),a("d3b7"),a("159b"),a("a434"),a("14d9"),a("4de4"),a("caad"),a("2532"),a("4e82"),a("fb6a"),a("a15b"),a("aa47")),s=a("ac0d"),c={name:"CTable",mixins:[s["d"],s["a"]],props:{option:Object,columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},setColumn:{type:Boolean,default:!1},loading:Boolean,visible:Boolean},watch:{columns:{handler:function(e){var t=this.getStorageCol(),a=[];a=t?this.dataDiff(e,t):Object(r["a"])(e),this.col=a.map((function(e,t){return Object(i["a"])(Object(i["a"])({},e),{},{index:t})})),this.checkedCol=this.checkedColFun(this.col),this.selectCol=this.checkedCol.map((function(e){return e.prop}))},immediate:!0},data:{handler:function(e){this.tableData=Object(r["a"])(e)},immediate:!0},col:{handler:function(e){this.setStorageCol(e)},deep:!0,immediate:!0},tableData:{handler:function(){var e=this;this.$nextTick((function(){e.$refs[e.option.ref].doLayout()}))},immediate:!0}},data:function(){return{expandedRows:[],tableData:[],col:[],checkedCol:[],selectCol:[],expands:[]}},mounted:function(){var e=this;document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()},this.$nextTick((function(){e.columnDrop()}))},methods:{openOrCloseAll:function(){this.$emit("change-tree")},expandRows:function(e){var t=this,a=e.data,n=e.expand;a.forEach((function(e){var a;t.$refs[t.option.ref].toggleRowExpansion(e,n);var o=t.expandedRows.indexOf(e);o>-1?null===(a=t.expandedRows)||void 0===a||a.splice(o,1):t.expandedRows.push(e)}))},handleRowClick:function(e,t,a){this.$emit("on-clear-row-selection",{ref:this.$refs[this.option.ref]}),this.$refs[this.option.ref].toggleRowSelection(e)},getRowKeys:function(e){return e.id},expandSelect:function(e,t){this.expands=[],t.length>0&&this.expands.push(e.id)},handleClickEditBtn:function(){this.$emit("on-open-edit-form")},handleClickDelBtn:function(){this.$emit("on-open-del-form")},cellClassName:function(e){if(("shopSaleList"!=this.option.ref||0!==e.rowIndex)&&e.column.columnKey)return e.column.columnKey.split(":")[1]?e.column.columnKey.split(":")[1]:void 0},drop:function(){var e=this;this.$nextTick((function(){e.columnDrop(),e.$refs[e.option.ref].doLayout()}))},selectAll:function(){this.selectCol=this.col.map((function(e){return e.prop})),this.col.filter((function(e){return!e.disabled})).forEach((function(e){return e.checked=!0})),this.checkedCol=this.checkedColFun(this.col),this.drop()},emptyAll:function(){this.selectCol=this.col.filter((function(e){return e.disabled})).map((function(e){return e.prop})),this.col.filter((function(e){return!e.disabled})).forEach((function(e){return e.checked=!1})),this.checkedCol=this.checkedColFun(this.col),this.drop()},handleChangeSelectColumn:function(){var e=this;this.col.forEach((function(t){t.checked=e.selectCol.includes(t.prop)})),this.checkedCol=this.checkedColFun(this.col),this.drop()},rowDrop:function(){var e=this,t=document.querySelector(".el-table__body-wrapper tbody");l["a"].create(t,{onEnd:function(t){var a=t.newIndex,n=t.oldIndex,o=[e.tableData[n],e.tableData[a]];e.tableData[a]=o[0],e.tableData[n]=o[1],e.drop(),e.$emit("dropRow",{dropRow:e.tableData[n],targetRow:e.tableData[a],dropRowIndex:n,targetRowIndex:a,data:e.tableData})}})},columnDrop:function(){var e=this;if(this.option.notAllowDrop)return!1;var t=this.$refs[this.option.ref].$el.querySelector(".el-table__header-wrapper tr");l["a"].create(t,{animation:180,delay:0,onEnd:function(t){var a=t.newIndex,n=t.oldIndex,o=e.checkedCol[n],i=e.checkedCol[a],r=[o.index,i.index];e.col[i.index].index=r[0],e.col[o.index].index=r[1],e.col.sort((function(e,t){return e.index-t.index})),e.checkedCol=e.checkedColFun(e.col),e.tableData=e.tableData.slice(0,e.tableData.length),e.drop(),e.$emit("dropCol",{colItem:o,newIndex:a,oldIndex:n,column:e.checkedCol})}})},checkedColFun:function(e){return e.filter((function(e){return e.checked}))},setStorageCol:function(e){this.option.key&&e&&e.length>0&&localStorage.setItem("CTable-"+this.option.key,JSON.stringify(e))},getStorageCol:function(){var e=localStorage.getItem("CTable-"+this.option.key);return e?JSON.parse(e):""},dataDiff:function(e,t){var a=e.length,n=t.length;if(a!=n)return e;var o=e.map((function(e){return e.prop})).sort(),r=t.map((function(e){return e.prop})).sort();if(o.join()!=r.join())return e;for(var l=[],s=0;s<t.length;s++)for(var c=t[s],p=0;p<e.length;p++){var d=e[p];c.prop===d.prop&&l.push(Object(i["a"])(Object(i["a"])({},d),{},{index:c.index,checked:c.checked}))}return l}}},p=c,d=(a("e361"),a("4fd6"),a("2877")),u=Object(d["a"])(p,n,o,!1,null,null,null);t["a"]=u.exports},"4fd6":function(e,t,a){"use strict";a("6afb")},6891:function(e,t,a){"use strict";a("052d")},"6afb":function(e,t,a){},a84f:function(e,t,a){},e361:function(e,t,a){"use strict";a("e7c0")},e7c0:function(e,t,a){},ec05:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{ref:"board",staticClass:"anylysis-center"},[t("div",{staticClass:"search-container"},[t(a.SearchForm,{ref:"searchForm",on:{"on-search":a.getData,"on-export":a.exportData,"on-open-data-compare":e.openDataCompare}})],1),t("div",{staticClass:"table-container"},[t(a.Table,{ref:"treeTable",attrs:{loading:a.data.loading,columns:a.data.listCols,data:a.data.tableData,setColumn:!0,option:a.data.tableOption,"row-key":"index","tree-props":{children:"child_list"}},on:{"sort-change":a.handleSortChange}})],1)])},o=[],i=a("c7eb"),r=a("1da1"),l=a("5530"),s=(a("d81d"),a("4e82"),a("edee")),c=a("2b0e"),p=a("fa7d"),d={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:100,align:"center",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",trend:"",icon:"el-icon-question",disabled:!1},u=[{prop:"title",title:"店铺（群）",align:"left",minWidth:180,disabled:!0,icon:"",fixed:!0},{prop:"sale_amount",title:"付款金额（已退）",minWidth:180,sortable:"custom"},{prop:"sale_amount",title:"付款金额（总额）",minWidth:180,sortable:"custom"},{prop:"sale_amount",title:"服-已退",minWidth:100},{prop:"sale_amount",title:"服-总额",minWidth:100},{prop:"sale_amount",title:"服",minWidth:100},{prop:"sale_amount",title:"配-已退",minWidth:100},{prop:"sale_amount",title:"配-总额",minWidth:100},{prop:"sale_amount",title:"配",minWidth:100},{prop:"sale_amount",title:"鞋-已退",minWidth:100},{prop:"sale_amount",title:"鞋-总额",minWidth:100},{prop:"sale_amount",title:"鞋",minWidth:100},{prop:"sale_amount",title:"退货率",minWidth:100}],f=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[t("div",{staticClass:"search-form"},[t("el-form",{ref:"form",attrs:{model:a.data.form,size:"small",inline:""}},[t("el-form-item",{attrs:{label:"平台事业群："}},[t("el-select",{attrs:{clearable:"",multiple:"",filterable:"","collapse-tags":"",placeholder:"请选择店铺，可搜索，可多选"},on:{change:a.handleOptionChange},model:{value:a.data.form.groups,callback:function(t){e.$set(a.data.form,"groups",t)},expression:"data.form.groups"}},e._l(a.data.groupOptions,(function(a){return t("el-option-group",{key:a.label,attrs:{label:a.label}},e._l(a.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)})),1),t("el-button-group",[t("el-button",{attrs:{type:"warning"},on:{click:a.onClearGroupSelect}},[e._v("清空")]),t("el-button",{attrs:{type:"primary"},on:{click:a.onSelectAllGroup}},[e._v("全选")])],1)],1),t("el-form-item",{attrs:{label:"时间："}},[t("el-date-picker",{staticStyle:{width:"270px"},attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":a.data.pickerOptions},model:{value:a.data.form.date,callback:function(t){e.$set(a.data.form,"date",t)},expression:"data.form.date"}})],1),t("el-form-item",[t("el-button-group",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:a.onSearch}},[e._v("查询")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:a.onExport}},[e._v("导出")])],1)],1)],1)],1)])},m=[],h=a("3835"),b=(a("b0c0"),a("fb6a"),a("a15b"),a("d3b7"),a("159b"),a("14d9"),a("a434"),a("ed08")),v=a("d0f1"),g={__name:"search-form",setup:function(e,t){var a=t.expose,n=t.emit,o=Object(c["reactive"])({groupOptions:[],pickerOptions:{shortcuts:v["a"]},form:{groups:[],date:[]}});Object(c["onMounted"])((function(){x(),u(),Object(c["nextTick"])((function(){C()}))})),Object(c["watch"])((function(){return o.form.date}),(function(){y()}));var d=function(){o.form.type=3},u=function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])();case 2:t=e.sent,o.groupOptions=t.data.map((function(e){var t;return{label:e.name,value:e.id,options:null===(t=e.child)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e.id}}))}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e,t=Object.assign({},Object(l["a"])({},o.form));return t.date?["startDate","endDate"].map((function(e,a){t[e]="month"===t.timeFrame?t["date"][a].slice(0,7):t["date"][a]})):(t["startDate"]="",t["endDate"]=""),t["businessGroup"]=null===(e=o.form.groups)||void 0===e?void 0:e.join(","),t["isLarge"]=parseInt(+o.form.isLarge),t["dataType"]=o.form.type,t},m=function(){n("on-open-data-compare",{})},g=function(e){var t=e.type;o.form.type=t,y()},y=function(){var e=Object(h["a"])(o.form.date,2),t=e[0],a=e[1],n=new Date(a)-new Date(t),i=new Date(Object(p["g"])(a));2==o.form.type&&(i=new Date(a),i.setDate(0));var r=i.getDate(),l=new Date(a).getDate(),s=new Date(a),c=new Date(t);if(l>=r)s=new Date(i),c=new Date(s-n);else{var d=86400*(r-l)*1e3;s=new Date(i-d),c=new Date(s-n)}c=Object(b["a"])(c,"yyyy-MM-dd"),s=Object(b["a"])(s,"yyyy-MM-dd"),o.form.time=[c,s]},C=function(){n("on-search",f())},w=function(){n("on-export",f())},_=function(){o.form.shops=[]},k=function(){var e=[];o.groupOptions.forEach((function(t){e.push(t.value)})),o.form.shops=e},x=function(){o.form.timeFrame="day";var e=Object(b["a"])(new Date,"yyyy-MM-dd");o.form.date=[e,e]},D=function(e){1!==e.length&&(-2===e[0]?o.form.shops=[-2]:-2===e[e.length-1]&&o.form.shops.splice(e.indexOf(-2),1))};return a({_getFormData:f}),{__sfc:!0,emit:n,data:o,handleChangeDate:d,getData:u,_getFormData:f,openDataCompare:m,handleClickBtn:g,switchTime:y,onSearch:C,onExport:w,onClearGroupSelect:_,onSelectAllGroup:k,setDefaultDate:x,handleOptionChange:D}}},y=g,C=(a("fcfa"),a("2877")),w=Object(C["a"])(y,f,m,!1,null,"202226aa",null),_=w.exports,k=a("1681"),x={__name:"index",setup:function(e){var t=u.map((function(e){return Object(l["a"])(Object(l["a"])({},d),e)})),a=Object(c["ref"])("treeTable"),n=Object(c["ref"])("searchForm"),o=Object(c["reactive"])({dataType:1,loading:!1,tableData:[],listCols:t,tableOption:{ref:"gmv",key:"gmv",backendSummary:!0,defaultSort:{prop:"sale_amount",order:"descending"},tips:"点击行首 > 展开列表"},total:0,expand:!1,sort:"sale_amount|desc"});Object(c["watch"])((function(){return o.dataType}),(function(){f()}));var f=function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(){var t,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.value._getFormData(),o.loading=!0,e.next=4,Object(s["e"])(Object(l["a"])(Object(l["a"])({},t),{},{sort:o.sort}));case 4:a=e.sent,o.tableData=a.data,o.loading=!1;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){var t,a=e.prop,n=e.order;if(Object(p["e"])(n))t="";else{var i="descending"===n?"desc":"asc";t=a+"|"+i}o.sort=t,f()},h=function(e){Object(s["b"])(Object(l["a"])({},e))};return{__sfc:!0,cols:t,treeTable:a,searchForm:n,data:o,getData:f,handleSortChange:m,exportData:h,listCols:u,SearchForm:_,Table:k["a"]}}},D=x,O=(a("6891"),Object(C["a"])(D,n,o,!1,null,"6f1005fe",null));t["default"]=O.exports},edee:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return c}));a("4e82"),a("99af");var n=a("c1fb"),o=a("da71"),i=function(){return n["a"].get(o["a"].api("Dashboard/GmvFinance/getDivisionData"))},r=function(e){var t=e.businessGroup,a=e.dataType,i=e.isLarge,r=e.startDate,l=e.endDate,s=e.comparison_start,c=e.comparison_end,p=e.sort,d={businessGroup:t,dataType:a,isLarge:i,startDate:r,endDate:l,comparisonStartDate:s,comparisonEndDate:c,sort:p};return n["a"].get(o["a"].api("Dashboard/GmvFinance/getList"),{params:d})},l=function(e){var t=o["a"].api("Dashboard/GmvFinance/exportFinance")+"?";for(var a in e)t+="".concat(a,"=").concat(e[a],"&");window.open(t)},s=function(e){var t=e.startTime,a=e.endTime,i=e.comparisonStartTime,r=e.comparisonEndTime,l=e.isUseComparison,s={startTime:t,endTime:a,comparisonStartTime:i,comparisonEndTime:r,isUseComparison:l};return n["a"].get(o["a"].api("Dashboard/GmvFinance/getHourList"),{params:s})},c=function(e){var t=o["a"].api("Dashboard/GmvFinance/exportHourList")+"?";for(var a in e)t+="".concat(a,"=").concat(e[a],"&");window.open(t)}},fcfa:function(e,t,a){"use strict";a("a84f")}}]);