(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-116f6b97"],{1681:function(t,e,a){"use strict";a("e9c4"),a("c7cd");var n=function(){var t=this,e=this,a=e._self._c;return a("div",{staticClass:"wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.setColumn,expression:"setColumn"}],staticClass:"header"},[a("div",{staticClass:"tips"},[a("i",{staticClass:"el-icon-info"}),e._v(" "+e._s(e.option.tips))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.setColumn,expression:"setColumn"}],staticClass:"setting"},[e.option.edit?a("div",[e.option.edit.able?a("el-button",{staticClass:"btn-able",attrs:{size:"small"},on:{click:e.handleClickEditBtn}},[e._v("编辑")]):a("el-button",{staticClass:"btn-disable",attrs:{size:"small",disabled:""}},[e._v("编辑")])],1):e._e(),e.option.unfilterable?e._e():a("div",{staticClass:"setting-icon"},[a("el-popover",{attrs:{placement:"left",trigger:"click","popper-class":"settingPopper"}},[a("el-checkbox-group",{staticClass:"check-container",on:{change:e.handleChangeSelectColumn},model:{value:e.selectCol,callback:function(t){e.selectCol=t},expression:"selectCol"}},e._l(e.col,(function(t){return a("el-checkbox",{key:t.prop,staticClass:"check-item",attrs:{label:t.prop,disabled:t.disabled},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}},[e._v(" "+e._s(t.title)+" ")])})),1),a("div",{staticClass:"select-group"},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.selectAll}},[e._v("全选")]),a("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:e.emptyAll}},[e._v("清空")])],1),a("div",{staticClass:"filter-container",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"icon el-icon-s-tools"}),e._v(" 筛选 ")])],1)],1)])]),a("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:JSON.stringify(e.checkedCol),ref:e.option.ref,class:e.option.backendSummary?"backend-summary table1":"table1",attrs:{"highlight-current-row":"",tableKey:e.option.key,data:e.tableData,"element-loading-text":"数据加载中","element-loading-spinner":"el-icon-loading","tooltip-effect":"light","show-summary":e.option.showSummary,size:"mini",height:"100%","cell-style":e.option.cellStyle,"header-cell-style":e.option.headerCellStyle,"summary-method":function(a){return t.option.summaryMethod(a,e.checkedCol)},"default-sort":e.option.defaultSort,"cell-class-name":function(t){return e.cellClassName(t)},border:"",lazy:""},on:{"row-click":e.handleRowClick}},"el-table",e.$attrs,!1),e.$listeners),[e.option.selectable?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.checkedCol,(function(t,n){return a("el-table-column",{key:t.prop,attrs:{"column-key":t.prop+":"+t.cellClass,index:n,label:t.label,align:t.align,"min-width":t.minWidth,fixed:t.fixed,prop:t.prop,"header-align":t.headerAlign,sortable:!!t.sortable&&("custom"!==t.sortable||"custom"),"show-overflow-tooltip":!t.notShowOverflowTooltip,type:t.type},scopedSlots:e._u([{key:"default",fn:function(n){return[e._t(t.slotName,null,null,n),t.props?a("el-row",e._l(t.props,(function(o,i){return a("el-col",{key:o.prop,attrs:{span:8}},[a("el-col",{staticClass:"ellipsis",staticStyle:{"text-align":"right"},attrs:{span:i!==t.props.length-1?20:24}},[a("el-tooltip",{attrs:{content:"".concat(n.row[o.prop]),effect:"light",placement:"top-start"}},[a("span",{class:o.class&&o.class(n.row[o.prop])},[e._v(" "+e._s(o.process?o.process(n.row[o.prop]):n.row[o.prop])+" ")])])],1),i!==t.props.length-1?a("el-col",{staticClass:"divider",attrs:{span:4}},[e._v("|")]):e._e()],1)})),1):a("span",[e._v(e._s(t.process?t.process(n.row[t.prop]):n.row[t.prop]))])]}}],null,!0)},[a("template",{slot:"header"},[a("el-tooltip",{attrs:{content:t.tooltip,placement:"top",effect:"light"}},[a("template",{slot:"content"},[a("span",{staticStyle:{display:"flex","justify-content":"center"}},[e._v(e._s(t.tooltip))]),t.tooltip2&&t.tooltip3?a("div",{staticStyle:{"margin-top":"5px"}},[a("span",[e._v(e._s(t.tooltip2))]),a("br"),a("span",[e._v(e._s(t.tooltip3))])]):e._e()]),t.openAll?a("span",{staticClass:"cursor-pointer",on:{click:e.openOrCloseAll}},[e._v(" "+e._s(t.title)),t.icon?a("i",{class:t.icon}):e._e()]):a("span",[e._v(" "+e._s(t.title)),t.icon?a("i",{class:t.icon}):e._e()])],2)],1)],2)}))],2)],1)},o=[],i=a("5530"),r=a("2909"),s=(a("d81d"),a("d3b7"),a("159b"),a("a434"),a("14d9"),a("4de4"),a("caad"),a("2532"),a("4e82"),a("fb6a"),a("a15b"),a("aa47")),c=a("ac0d"),l={name:"CTable",mixins:[c["d"],c["a"]],props:{option:Object,columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},setColumn:{type:Boolean,default:!1},loading:Boolean,visible:Boolean},watch:{columns:{handler:function(t){var e=this.getStorageCol(),a=[];a=e?this.dataDiff(t,e):Object(r["a"])(t),this.col=a.map((function(t,e){return Object(i["a"])(Object(i["a"])({},t),{},{index:e})})),this.checkedCol=this.checkedColFun(this.col),this.selectCol=this.checkedCol.map((function(t){return t.prop}))},immediate:!0},data:{handler:function(t){this.tableData=Object(r["a"])(t)},immediate:!0},col:{handler:function(t){this.setStorageCol(t)},deep:!0,immediate:!0},tableData:{handler:function(){var t=this;this.$nextTick((function(){t.$refs[t.option.ref].doLayout()}))},immediate:!0}},data:function(){return{expandedRows:[],tableData:[],col:[],checkedCol:[],selectCol:[],expands:[]}},mounted:function(){var t=this;document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()},this.$nextTick((function(){t.columnDrop()}))},methods:{openOrCloseAll:function(){this.$emit("change-tree")},expandRows:function(t){var e=this,a=t.data,n=t.expand;a.forEach((function(t){var a;e.$refs[e.option.ref].toggleRowExpansion(t,n);var o=e.expandedRows.indexOf(t);o>-1?null===(a=e.expandedRows)||void 0===a||a.splice(o,1):e.expandedRows.push(t)}))},handleRowClick:function(t,e,a){this.$emit("on-clear-row-selection",{ref:this.$refs[this.option.ref]}),this.$refs[this.option.ref].toggleRowSelection(t)},getRowKeys:function(t){return t.id},expandSelect:function(t,e){this.expands=[],e.length>0&&this.expands.push(t.id)},handleClickEditBtn:function(){this.$emit("on-open-edit-form")},handleClickDelBtn:function(){this.$emit("on-open-del-form")},cellClassName:function(t){if(("shopSaleList"!=this.option.ref||0!==t.rowIndex)&&t.column.columnKey)return t.column.columnKey.split(":")[1]?t.column.columnKey.split(":")[1]:void 0},drop:function(){var t=this;this.$nextTick((function(){t.columnDrop(),t.$refs[t.option.ref].doLayout()}))},selectAll:function(){this.selectCol=this.col.map((function(t){return t.prop})),this.col.filter((function(t){return!t.disabled})).forEach((function(t){return t.checked=!0})),this.checkedCol=this.checkedColFun(this.col),this.drop()},emptyAll:function(){this.selectCol=this.col.filter((function(t){return t.disabled})).map((function(t){return t.prop})),this.col.filter((function(t){return!t.disabled})).forEach((function(t){return t.checked=!1})),this.checkedCol=this.checkedColFun(this.col),this.drop()},handleChangeSelectColumn:function(){var t=this;this.col.forEach((function(e){e.checked=t.selectCol.includes(e.prop)})),this.checkedCol=this.checkedColFun(this.col),this.drop()},rowDrop:function(){var t=this,e=document.querySelector(".el-table__body-wrapper tbody");s["a"].create(e,{onEnd:function(e){var a=e.newIndex,n=e.oldIndex,o=[t.tableData[n],t.tableData[a]];t.tableData[a]=o[0],t.tableData[n]=o[1],t.drop(),t.$emit("dropRow",{dropRow:t.tableData[n],targetRow:t.tableData[a],dropRowIndex:n,targetRowIndex:a,data:t.tableData})}})},columnDrop:function(){var t=this;if(this.option.notAllowDrop)return!1;var e=this.$refs[this.option.ref].$el.querySelector(".el-table__header-wrapper tr");s["a"].create(e,{animation:180,delay:0,onEnd:function(e){var a=e.newIndex,n=e.oldIndex,o=t.checkedCol[n],i=t.checkedCol[a],r=[o.index,i.index];t.col[i.index].index=r[0],t.col[o.index].index=r[1],t.col.sort((function(t,e){return t.index-e.index})),t.checkedCol=t.checkedColFun(t.col),t.tableData=t.tableData.slice(0,t.tableData.length),t.drop(),t.$emit("dropCol",{colItem:o,newIndex:a,oldIndex:n,column:t.checkedCol})}})},checkedColFun:function(t){return t.filter((function(t){return t.checked}))},setStorageCol:function(t){this.option.key&&t&&t.length>0&&localStorage.setItem("CTable-"+this.option.key,JSON.stringify(t))},getStorageCol:function(){var t=localStorage.getItem("CTable-"+this.option.key);return t?JSON.parse(t):""},dataDiff:function(t,e){var a=t.length,n=e.length;if(a!=n)return t;var o=t.map((function(t){return t.prop})).sort(),r=e.map((function(t){return t.prop})).sort();if(o.join()!=r.join())return t;for(var s=[],c=0;c<e.length;c++)for(var l=e[c],p=0;p<t.length;p++){var d=t[p];l.prop===d.prop&&s.push(Object(i["a"])(Object(i["a"])({},d),{},{index:l.index,checked:l.checked}))}return s}}},p=l,d=(a("e361"),a("4fd6"),a("2877")),u=Object(d["a"])(p,n,o,!1,null,null,null);e["a"]=u.exports},"1ff7":function(t,e,a){},"38f5":function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"self-pagination"},[e("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handlePageChange,"size-change":t.handleSizeChange}})],1)},o=[],i=(a("a9e3"),a("5627")),r={name:"Pagination",mixins:[i["a"]],props:{total:Number},data:function(){return{pageSizes:[10,20,50,100,300],pageSize:20,page:1}},methods:{handleSizeChange:function(t){this.pageSize=t,this.$emit("on-page-change",{page:this.page,pageSize:this.pageSize})},handlePageChange:function(t){this.page=t,this.$emit("on-page-change",{page:t,pageSize:this.pageSize})},getPaginationData:function(){return{page:this.page,pageSize:this.pageSize}}}},s=r,c=(a("6658"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"7d1a7f65",null);e["a"]=l.exports},"45d6":function(t,e,a){},"4fd6":function(t,e,a){"use strict";a("6afb")},5627:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={data:function(){return{tableLoading:!1,dataTotal:0,pageSize:50,currentPage:1,pageSizes:[20,50,100,200,400]}}}},6658:function(t,e,a){"use strict";a("ff04")},"6afb":function(t,e,a){},aa04:function(t,e,a){},ab0a:function(t,e,a){"use strict";a("1ff7")},de38:function(t,e,a){"use strict";a("aa04")},e361:function(t,e,a){"use strict";a("e7c0")},e7c0:function(t,e,a){},edee:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return l}));a("4e82"),a("99af");var n=a("c1fb"),o=a("da71"),i=function(){return n["a"].get(o["a"].api("Dashboard/GmvFinance/getDivisionData"))},r=function(t){var e=t.businessGroup,a=t.dataType,i=t.isLarge,r=t.startDate,s=t.endDate,c=t.comparison_start,l=t.comparison_end,p=t.sort,d={businessGroup:e,dataType:a,isLarge:i,startDate:r,endDate:s,comparisonStartDate:c,comparisonEndDate:l,sort:p};return n["a"].get(o["a"].api("Dashboard/GmvFinance/getList"),{params:d})},s=function(t){var e=o["a"].api("Dashboard/GmvFinance/exportFinance")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)},c=function(t){var e=t.startTime,a=t.endTime,i=t.comparisonStartTime,r=t.comparisonEndTime,s=t.isUseComparison,c={startTime:e,endTime:a,comparisonStartTime:i,comparisonEndTime:r,isUseComparison:s};return n["a"].get(o["a"].api("Dashboard/GmvFinance/getHourList"),{params:c})},l=function(t){var e=o["a"].api("Dashboard/GmvFinance/exportHourList")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)}},f0b9:function(t,e,a){"use strict";a("45d6")},f127:function(t,e,a){"use strict";a.r(e);var n,o,i=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",{ref:"board",staticClass:"anylysis-center"},[e("div",{staticClass:"search-container"},[e(a.SearchForm,{ref:"searchForm",on:{"on-search":a.getData,"on-export":a.exportData}})],1),e("div",{staticClass:"table-container"},[e(a.Table,{ref:"treeTable",attrs:{loading:a.data.loading,columns:a.data.listCols,data:a.data.tableData,setColumn:!0,option:a.data.tableOption,"row-key":"index"},on:{"cell-dblclick":a.cellDblclick,"sort-change":a.onSortChange}})],1),e(a.ApplyList,{ref:"detailWin"})],1)},r=[],s=a("c7eb"),c=a("1da1"),l=a("5530"),p=(a("d81d"),a("4e82"),a("edee")),d=(a("99af"),a("c1fb")),u=a("da71"),f=function(t){var e=t.shop_id,a=t.start_time,n=t.end_time,o={shop_id:e,start_time:a,end_time:n};return d["a"].get(u["a"].self("Dashboard/InventoryMonitorShopOutofstockBan/getShopOutofstockBanLs"),{params:o})},h=a("2b0e"),m=a("fa7d"),b={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:100,align:"center",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",trend:"",icon:"el-icon-question",disabled:!1},g=[{prop:"shop_name",title:"店铺",align:"left",minWidth:180,disabled:!0,icon:"",fixed:!0},{prop:"ban_date",title:"下架日期",minWidth:100,disabled:!0},{prop:"ban_sku_total_num",title:"下架sku总次数",minWidth:170,disabled:!0,sortable:!0},{prop:"ban_sku_success_num",title:"成功下架sku次数",minWidth:170,disabled:!0,sortable:!0},{prop:"ban_total_amount",title:"下架sku总金额",minWidth:170,sortable:!0},{prop:"amount",title:"预估减少赔付金额",cellClass:"bg-green",minWidth:180,sortable:!0},{prop:"ban_activity_sku_fail_num",title:"sku参与活动导致下架失败次数",minWidth:230,disabled:!0},{prop:"ban_normal_sku_fail_num",title:"其他原因失败次数",minWidth:160,disabled:!0},{prop:"sku_deleted_no_sync_num",title:"sku已被删除，无需下架数量",minWidth:220,disabled:!0}],_=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",[e("div",{staticClass:"search-form"},[e("el-form",{ref:"form",attrs:{model:a.data.form,size:"small",inline:""}},[e("el-form-item",{attrs:{label:"平台事业群："}},[e("el-select",{attrs:{clearable:"",multiple:"",filterable:"","collapse-tags":"",placeholder:"请选择店铺，可搜索，可多选"},on:{change:a.handleOptionChange},model:{value:a.data.form.shops,callback:function(e){t.$set(a.data.form,"shops",e)},expression:"data.form.shops"}},t._l(a.data.shopOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-button-group",[e("el-button",{attrs:{type:"warning"},on:{click:a.onClearGroupSelect}},[t._v("清空")]),e("el-button",{attrs:{type:"primary"},on:{click:a.onSelectAllGroup}},[t._v("全选")])],1)],1),e("el-form-item",{attrs:{label:"时间："}},[e("el-date-picker",{attrs:{type:"day"==a.data.form.timeFrame?"daterange":"monthrange","range-separator":"-","value-format":(a.data.form.timeFrame,"yyyy-MM-dd"),format:"day"==a.data.form.timeFrame?"yyyy年MM月dd日":"yyyy年MM月","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":a.data.pickerOptions},model:{value:a.data.form.date,callback:function(e){t.$set(a.data.form,"date",e)},expression:"data.form.date"}})],1),e("el-form-item",[e("el-button-group",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:a.onSearch}},[t._v("查询")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:a.onExport}},[t._v("导出")])],1)],1)],1)],1)])},v=[],y=a("3835"),k=(a("14d9"),a("b0c0"),a("fb6a"),a("a15b"),a("d3b7"),a("159b"),a("a434"),a("ed08")),O=a("d0f1"),C={__name:"search-form",setup:function(t,e){var a=e.expose,n=e.emit,o=Object(h["reactive"])({shopOptions:[],groupOptions:[],pickerOptions:{shortcuts:O["a"]},form:{shops:[],date:[],time:[]}});Object(h["onMounted"])((function(){v(),i(),Object(h["nextTick"])((function(){f()}))})),Object(h["watch"])((function(){return o.form.date}),(function(){u()}));var i=function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["c"])();case 2:e=t.sent,e.data.map((function(t){var e;return null===(e=t.child)||void 0===e?void 0:e.map((function(t){return o.shopOptions.push({label:t.name,value:t.id})}))}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t,e=Object.assign({},Object(l["a"])({},o.form));return e.date?["start_time","end_time"].map((function(t,a){e[t]="month"===e.timeFrame?e["date"][a].slice(0,7):e["date"][a]})):(e["start_time"]="",e["end_time"]=""),e["shop_id"]=null===(t=o.form.shops)||void 0===t?void 0:t.join(","),e},d=function(t){var e=t.type;o.form.type=e,u()},u=function(){var t=Object(y["a"])(o.form.date,2),e=t[0],a=t[1],n=new Date(a)-new Date(e),i=new Date(Object(m["g"])(a));2==o.form.type&&(i=new Date(a),i.setDate(0));var r=i.getDate(),s=new Date(a).getDate(),c=new Date(a),l=new Date(e);if(s>=r)c=new Date(i),l=new Date(c-n);else{var p=86400*(r-s)*1e3;c=new Date(i-p),l=new Date(c-n)}l=Object(k["a"])(l,"yyyy-MM-dd"),c=Object(k["a"])(c,"yyyy-MM-dd"),o.form.time=[l,c]},f=function(){n("on-search",r())},b=function(){n("on-export",r())},g=function(){o.form.shops=[]},_=function(){var t=[];o.groupOptions.forEach((function(e){t.push(e.value)})),o.form.shops=t},v=function(){o.form.timeFrame="day";var t=Object(k["a"])(new Date,"yyyy-MM-dd");o.form.date=[t,t]},C=function(t){1!==t.length&&(-2===t[0]?o.form.shops=[-2]:-2===t[t.length-1]&&o.form.shops.splice(t.indexOf(-2),1))};return a({_getFormData:r}),{__sfc:!0,emit:n,data:o,getData:i,_getFormData:r,handleClickBtn:d,switchTime:u,onSearch:f,onExport:b,onClearGroupSelect:g,onSelectAllGroup:_,setDefaultDate:v,handleOptionChange:C}}},w=C,j=(a("f0b9"),a("2877")),D=Object(j["a"])(w,_,v,!1,null,"449284c5",null),x=D.exports,S=a("1681"),T=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e(a.Win,{ref:"win",attrs:{title:a.data.title,top:"10vh"}},[e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"table-container"},[e(a.Table,{ref:"treeTable",attrs:{loading:a.data.loading,columns:a.data.listCols,data:a.data.tableData,setColumn:!1,option:a.data.tableOption},scopedSlots:t._u([{key:"pic",fn:function(t){return[e("el-image",{staticClass:"img-card",attrs:{src:t.row.pic_url,"preview-src-list":[t.row.pic_url]}})]}},{key:"date",fn:function(e){return[t._v(" "+t._s(e.row.start_date)+" ~ "+t._s(e.row.end_date)+" ")]}},{key:"status",fn:function(n){return[t._v(" "+t._s(a.statusJSON[n.row.status])+" "),e("el-tooltip",{attrs:{content:n.row.status,placement:"top",effect:"light"}},[e("span",{staticClass:"cursor-pointer"},[1==n.row.status?e("i",{staticClass:"el-icon-question text-gold"}):t._e()])])]}}])})],1),e(a.Pagination,{ref:"pagination",attrs:{total:a.data.total},on:{"on-page-change":a.getData,"on-page-size-change":a.getData}})],1)])},W=[],z=a("f2bc"),P=a("dc19"),F=a("ade3"),N=(a("b680"),n={checked:!0,fixed:!1,sortable:!1,headerAlign:"center",showOverflowTooltip:!0,minWidth:80,align:"right",toString:!1,toolTip:"",subTooltip:"",class:"",subClass:"",subProp:"",trend:"",icon:"el-icon-question",process:function(t){return isNaN(t)?t:Object(m["h"])(t)}},Object(F["a"])(n,"process",(function(t){return isNaN(t)?t:(+t).toFixed()})),Object(F["a"])(n,"subProcess",(function(t){return(isNaN(t)?t+"%":Object(m["h"])(100*t))+"%"})),Object(F["a"])(n,"trendProcess",(function(t){return(isNaN(t)?t+"%":Object(m["h"])(100*t))+"%"})),Object(F["a"])(n,"disabled",!1),n),$=(Object(l["a"])(Object(l["a"])({},N),{},{prop:"num",title:"款数",tooltip:"货盘货号数量",process:function(t){return t}}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"has_sale_num",tooltip:"货盘周期内有销量的款式",minWidth:100,title:"动销款式",process:function(t){return t}}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"dynamic_sales_ratio",minWidth:100,tooltip:"货盘动效款式/款数*100%",title:"动销率",process:function(t){return Object(m["h"])(+t)+"%"}}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"sku_num",minWidth:100,tooltip:"货盘货号铺货链接总数",title:"sku数"}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"stock_num",minWidth:100,tooltip:"货盘库存总量",title:"库存数量"}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"stock_ratio",minWidth:100,tooltip:"分类库存/总库存*100%",title:"库存占比",process:function(t){return Object(m["h"])(+t)+"%"}}),Object(l["a"])(Object(l["a"])({},N),{},(o={minWidth:100,prop:"ten_day_sale",tooltip:"货盘周期内近10日销量"},Object(F["a"])(o,"minWidth",110),Object(F["a"])(o,"title","近10日销量"),o)),Object(l["a"])(Object(l["a"])({},N),{},{prop:"sale_num_ratio",minWidth:100,tooltip:"分类近十日销售/近十日总销售*100%",title:"销售占比",process:function(t){return Object(m["h"])(+t)+"%"}}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"stock_sale_ratio",minWidth:100,tooltip:"货盘实时库存/货盘周期内日均销量",title:"库销比"}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"total_price",minWidth:150,tooltip:"货盘吊牌价总价",title:"吊牌价金额（亿）",process:function(t){return(+t/1e8).toFixed(2)}}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"total_cost_price",minWidth:160,tooltip:"货盘中台成本总价",title:"VIP中台成本（亿）",process:function(t){return(+t/1e8).toFixed(2)}}),Object(l["a"])(Object(l["a"])({},N),{},{slotName:"high_sale_shop",prop:"",minWidth:270,tooltip:"近10日销售排名前三的店铺",title:"主推店铺"}),Object(l["a"])(Object(l["a"])({},N),{},{prop:"sell_out_ratio",title:"售罄率",tooltip:"（初始库存-当前库存）/初始库存*100%",process:function(t){return Object(m["h"])(+t)+"%"}}),[{prop:"pic",slotName:"pic",title:"预览图",align:"center",minWidth:80,icon:"",process:function(t){return""}},{prop:"goods_no",title:"货号",icon:"",align:"left"},{prop:"shop",title:"申请店铺",icon:"",align:"left"},{prop:"bargain_price",title:"申请价格",icon:"",align:"right"},{prop:"num",title:"申请数量",icon:"",align:"right"},{slotName:"date",prop:"特价周期",title:"特价周期",icon:"",minWidth:150,align:"center"},{prop:"apply_time",title:"申请时间",minWidth:110,icon:"",align:"center"},{prop:"audit_user",title:"审核人",icon:"",align:"center"},{slotName:"status",prop:"状态",title:"状态",icon:"",align:"center",process:function(t){return""}}]),A=a("fc28"),L=a("38f5"),E=(a("3b6a"),{__name:"apply-list",emits:null,setup:function(t,e){var a=e.expose,n=e.emit,o=$.map((function(t){return Object(l["a"])(Object(l["a"])({},N),t)})),i={0:"待审核",1:"已通过",2:"未通过"},r=Object(h["ref"])(null),p=Object(h["ref"])(null),d=Object(h["ref"])(null),u=Object(h["reactive"])({id:"",visible:!1,title:"",loading:!1,tableData:[],listCols:o,tableOption:{ref:"applyList",key:"applyList",backendSummary:!0},total:0,expand:!1}),f=function(){r.value.open(),u.title="特价申请记录",Object(h["nextTick"])((function(){b()}))},m=function(t){r.value.close(),n("on-close-task-board",{task_id:t})},b=function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e,a,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=p.value.getPaginationData(),a={limit:e.pageSize,start:(e.page-1)*e.pageSize},t.next=4,Object(A["d"])(a);case 4:n=t.sent,u.tableData=(null===n||void 0===n?void 0:n.root)||[],u.total=+(null===n||void 0===n?void 0:n.totalCount);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(t){var e,a=t.prop,n=t.order;if(n){var o="descending"===n?"desc":"asc";e=a+"|"+o}else e="";u.sort=e,b()};return a({open:f}),{__sfc:!0,cols:o,statusJSON:i,emit:n,win:r,pagination:p,taskDetail:d,data:u,open:f,close:m,getData:b,handleSortChange:g,Win:z["a"],Table:P["a"],Pagination:L["a"]}}}),M=E,R=(a("de38"),Object(j["a"])(M,T,W,!1,null,"0c1a5c8e",null)),I=R.exports,G={__name:"index",setup:function(t){var e=g.map((function(t){return Object(l["a"])(Object(l["a"])({},b),t)})),a=Object(h["ref"])(null),n=Object(h["ref"])(null),o=Object(h["reactive"])({dataType:1,loading:!1,tableData:[],listCols:e,tableOption:{ref:"gmv",key:"gmv",backendSummary:!0,tips:"双击行展开详情页"},total:0,sort:"sale_amount|desc"});Object(h["watch"])((function(){return o.dataType}),(function(){d()}));var i=function(t,e,n,o){console.info(a.value.$refs.win.open())},r=function(t){var e=t.column,a=t.prop,n=t.order;Object(m["i"])({column:e,prop:a,order:n},o.tableData)},d=function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var e,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.value._getFormData(),o.loading=!0,console.info(e),t.next=5,f(Object(l["a"])({},e));case 5:a=t.sent,o.tableData=a.list||[],o.loading=!1;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(t){var e,a=t.prop,n=t.order;if(Object(m["e"])(n))e="";else{var i="descending"===n?"desc":"asc";e=a+"|"+i}o.sort=e,d()},_=function(t){Object(p["b"])(Object(l["a"])({},t))};return{__sfc:!0,cols:e,detailWin:a,searchForm:n,data:o,cellDblclick:i,onSortChange:r,getData:d,handleSortChange:u,exportData:_,listCols:g,SearchForm:x,Table:S["a"],ApplyList:I}}},B=G,J=(a("ab0a"),Object(j["a"])(B,i,r,!1,null,"07de2e1d",null));e["default"]=J.exports},fc28:function(t,e,a){"use strict";a.d(e,"h",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"i",(function(){return s})),a.d(e,"g",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"e",(function(){return p})),a.d(e,"d",(function(){return d})),a.d(e,"a",(function(){return u})),a.d(e,"b",(function(){return f}));a("b0c0"),a("4e82"),a("99af");var n=a("c1fb"),o=a("da71"),i=function(){return n["a"].get(o["a"].api("Dashboard/ProductDashboard/getShop"))},r=function(t){var e=t.goods_no,a={goods_no:e};return n["a"].get(o["a"].api("Dashboard/ProductDashboard/getAllShop"),{params:a})},s=function(t){var e=t.goods_no,a=t.shop,i=t.status,r={goods_no:e,shop:a,status:i};return n["a"].post(o["a"].api("Dashboard/ProductDashboard/addShopGoodsnoConf"),r)},c=function(t){var e=t.start_time,a=t.end_time,i=t.shop_id,r=t.brand,s=t.tag,c=t.goods_no,l=t.top_cname,p=t.cname,d=t.task_id,u=t.sale_num_start,f=t.sale_num_end,h=t.is_lock,m=t.is_special,b=t.is_discount,g=t.start,_=t.limit,v=t.sort,y={start_time:e,end_time:a,shop_id:i,brand:r,tag:s,goods_no:c,top_cname:l,cname:p,task_id:d,sale_num_start:u,sale_num_end:f,is_lock:h,is_special:m,is_discount:b,start:g,limit:_,sort:v};return n["a"].get(o["a"].api("Dashboard/ProductDashboard/getList"),{params:y})},l=function(t){var e=t.goods_no,a=t.start_time,i=t.end_time,r={goods_no:e,start_time:a,end_time:i};return n["a"].get(o["a"].api("Dashboard/ProductDashboard/getDetail"),{params:r})},p=function(t){var e=t.goods_no,a=t.start_time,i=t.end_time,r={goods_no:e,start_time:a,end_time:i};return n["a"].get(o["a"].api("Dashboard/ProductDashboard/getCompeteList"),{params:r})},d=function(t){var e=t.start,a=t.limit,i={start:e,limit:a};return n["a"].get(o["a"].api("Dashboard/ProductDashboard/getBargainList"),{params:i})},u=function(t){var e=t.goods_no,a=t.shop_id,i=t.bargain_price,r=t.num,s=t.start_date,c=t.end_date,l={goods_no:e,shop_id:a,bargain_price:i,num:r,start_date:s,end_date:c};return n["a"].post(o["a"].api("Dashboard/ProductDashboard/applyBargainPrice"),l)},f=function(t){var e=o["a"].api("Dashboard/ProductDashboard/export")+"?";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");window.open(e)}},ff04:function(t,e,a){}}]);